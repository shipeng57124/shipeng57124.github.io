const a0_0x306675=a0_0x28de;(function(_0x1494bd,_0x4c676b){const _0x1c9e96=a0_0x28de,_0x40dbae=_0x1494bd();while(!![]){try{const _0x5aaf7d=parseInt(_0x1c9e96(0x245))/0x1+-parseInt(_0x1c9e96(0x23b))/0x2*(parseInt(_0x1c9e96(0x2ff))/0x3)+parseInt(_0x1c9e96(0x2ee))/0x4+-parseInt(_0x1c9e96(0x1a3))/0x5*(-parseInt(_0x1c9e96(0x2b1))/0x6)+-parseInt(_0x1c9e96(0x27e))/0x7*(-parseInt(_0x1c9e96(0x29b))/0x8)+-parseInt(_0x1c9e96(0x2e9))/0x9*(parseInt(_0x1c9e96(0x2c5))/0xa)+parseInt(_0x1c9e96(0x198))/0xb*(-parseInt(_0x1c9e96(0x1f2))/0xc);if(_0x5aaf7d===_0x4c676b)break;else _0x40dbae['push'](_0x40dbae['shift']());}catch(_0x440f67){_0x40dbae['push'](_0x40dbae['shift']());}}}(a0_0x5168,0xe6a8c));const TONES=[{'tone':0x1,'key':'1','colIndex':0x0,'color':a0_0x306675(0x2f5),'symbol':'¯','zh':'一声','en':a0_0x306675(0x2f7)},{'tone':0x2,'key':'2','colIndex':0x1,'color':a0_0x306675(0x1ca),'symbol':'ˊ','zh':'二声','en':a0_0x306675(0x1ce)},{'tone':0x3,'key':'3','colIndex':0x2,'color':a0_0x306675(0x1d1),'symbol':'ˇ','zh':'三声','en':a0_0x306675(0x309)},{'tone':0x4,'key':'4','colIndex':0x3,'color':a0_0x306675(0x20d),'symbol':'ˋ','zh':'四声','en':a0_0x306675(0x2cb)},{'tone':0x5,'key':'5','colIndex':0x4,'color':'#9254de','symbol':'·','zh':'轻声','en':'5th'}],MAX_ROWS=0xc,CHAR_TIMEOUT_MS=0x0,FALL_SPEED=0x2d,FALLING_COLOR=a0_0x306675(0x2ac),FALLING_TEXT_COLOR=a0_0x306675(0x1db),TEXTS={'zh':{'title':a0_0x306675(0x2b7),'welcome':a0_0x306675(0x1cb),'levelLabel':a0_0x306675(0x1d0),'deckLabel':'选择词库：','start':'开始游戏','restart':a0_0x306675(0x2a8),'pause':'暂停','resume':'继续','paused':a0_0x306675(0x1d7),'showSetup':'设置','hideSetup':'隐藏','score':a0_0x306675(0x296),'combo':'连击:','time':a0_0x306675(0x1bc),'gameOver':a0_0x306675(0x281),'gameClear':a0_0x306675(0x269),'current':'当前：','langBtn':'En','recordsTitle':a0_0x306675(0x258),'modalTitle':a0_0x306675(0x221),'nameLabel':a0_0x306675(0x273),'save':'保存','close':'关闭'},'en':{'title':'Tone\x20Blocks','welcome':a0_0x306675(0x21f),'levelLabel':a0_0x306675(0x205),'deckLabel':a0_0x306675(0x29e),'start':a0_0x306675(0x252),'restart':a0_0x306675(0x308),'pause':a0_0x306675(0x232),'resume':a0_0x306675(0x260),'paused':a0_0x306675(0x25b),'showSetup':a0_0x306675(0x209),'hideSetup':a0_0x306675(0x19c),'score':a0_0x306675(0x1e1),'combo':a0_0x306675(0x2ab),'time':a0_0x306675(0x2d0),'gameOver':a0_0x306675(0x20e),'gameClear':a0_0x306675(0x30c),'current':'Current:','langBtn':'中文','recordsTitle':a0_0x306675(0x2f9),'modalTitle':'Result','nameLabel':a0_0x306675(0x1be),'save':'Save','close':'Close'}},STORAGE_KEY=a0_0x306675(0x2bc),canvas=document[a0_0x306675(0x303)](a0_0x306675(0x2ef)),ctx=canvas[a0_0x306675(0x2a4)]('2d'),container=document[a0_0x306675(0x303)]('canvas-container'),welcomePanel=document[a0_0x306675(0x303)](a0_0x306675(0x1f3)),welcomeText=document[a0_0x306675(0x303)](a0_0x306675(0x274)),setupToggle=document[a0_0x306675(0x303)](a0_0x306675(0x314)),levelSelect=document[a0_0x306675(0x303)]('level-select'),deckSelect=document[a0_0x306675(0x303)](a0_0x306675(0x2bb)),startBtn=document[a0_0x306675(0x303)](a0_0x306675(0x290)),scoreSpan=document[a0_0x306675(0x303)](a0_0x306675(0x28c)),comboSpan=document[a0_0x306675(0x303)](a0_0x306675(0x259)),timeSpan=document[a0_0x306675(0x303)](a0_0x306675(0x277)),statusLabel=document[a0_0x306675(0x303)](a0_0x306675(0x1f8)),currentTextLabel=document[a0_0x306675(0x303)](a0_0x306675(0x238)),titleEl=document[a0_0x306675(0x303)]('title'),levelLabelEl=document[a0_0x306675(0x303)](a0_0x306675(0x195)),deckLabelEl=document[a0_0x306675(0x303)](a0_0x306675(0x2d7)),scoreLabelEl=document[a0_0x306675(0x303)](a0_0x306675(0x233)),comboLabelEl=document[a0_0x306675(0x303)](a0_0x306675(0x2a1)),timerLabelEl=document[a0_0x306675(0x1ab)]('#timer'),langBtn=document[a0_0x306675(0x303)](a0_0x306675(0x2fc)),pauseBtn=document[a0_0x306675(0x303)](a0_0x306675(0x2ed)),headerRestartBtn=document[a0_0x306675(0x303)]('header-restart-btn'),toneButtonsDiv=document[a0_0x306675(0x303)](a0_0x306675(0x2e1)),gameOverOverlay=document[a0_0x306675(0x303)](a0_0x306675(0x1fa)),gameOverText=document['getElementById']('game-over-text'),restartBtn=document['getElementById'](a0_0x306675(0x19f)),recordsTitleEl=document[a0_0x306675(0x303)](a0_0x306675(0x278)),recordsListEl=document['getElementById'](a0_0x306675(0x2e3)),resultModal=document['getElementById'](a0_0x306675(0x285)),modalTitleEl=document['getElementById']('modal-title'),modalSummaryEl=document[a0_0x306675(0x303)](a0_0x306675(0x2d6)),nameLabelEl=document[a0_0x306675(0x303)]('name-label'),playerNameInput=document['getElementById']('player-name'),saveResultBtn=document['getElementById'](a0_0x306675(0x27f)),closeResultBtn=document[a0_0x306675(0x303)](a0_0x306675(0x1c3));let currentLang='zh';const gameState={'categories':new Map(),'decksById':new Map(),'currentCategory':null,'currentDeckId':null,'phraseQueue':[],'currentPhrase':null,'currentCharIndex':0x0,'awaitingInput':![],'gameOver':![],'paused':![],'score':0x0,'combo':0x0,'board':[[],[],[],[],[]],'fallingBlocks':[],'currentPhraseId':null,'audioObj':null,'startTime':null,'timerHandle':null,'lastElapsedSec':0x0,'elapsedBaseSec':0x0,'lastFrameTime':null};function buildToneButtons(){const _0x459ee4=a0_0x306675,_0xb817ff={'OPDxJ':function(_0xfec456,_0xaf1eff){return _0xfec456(_0xaf1eff);},'RquhU':function(_0x55eb49,_0x115395){return _0x55eb49(_0x115395);},'OKFXZ':'button','afZbW':_0x459ee4(0x304),'nuygX':function(_0x2e4906,_0x44afbe){return _0x2e4906(_0x44afbe);},'ifwyb':function(_0x3d663d,_0x13e35b){return _0x3d663d===_0x13e35b;},'urCDj':'&nbsp;','YoHuP':_0x459ee4(0x1d3),'usTWJ':_0x459ee4(0x272)};toneButtonsDiv[_0x459ee4(0x21e)]='',TONES[_0x459ee4(0x201)](_0x2af4dd=>{const _0x1cc976=_0x459ee4,_0x6a0fe9=document[_0x1cc976(0x264)](_0xb817ff[_0x1cc976(0x293)]);_0x6a0fe9[_0x1cc976(0x219)]=_0xb817ff['afZbW'],_0x6a0fe9[_0x1cc976(0x218)][_0x1cc976(0x306)]=_0x1cc976(0x212)+_0x2af4dd['color']+_0x1cc976(0x26f),_0x6a0fe9[_0x1cc976(0x214)][_0x1cc976(0x1ae)]=_0xb817ff[_0x1cc976(0x1d4)](String,_0x2af4dd[_0x1cc976(0x1ae)]);const _0x5db7ed=_0xb817ff['ifwyb'](_0x2af4dd[_0x1cc976(0x1ae)],0x5)?_0xb817ff[_0x1cc976(0x20b)]:_0x2af4dd[_0x1cc976(0x1f7)]||_0x2af4dd['tone'];_0x6a0fe9['innerHTML']=_0x1cc976(0x1ef)+_0x5db7ed+_0x1cc976(0x2bf)+(currentLang==='zh'?_0x2af4dd['zh']:_0x2af4dd['en'])+_0x1cc976(0x19b),_0x6a0fe9[_0x1cc976(0x1a2)](_0xb817ff[_0x1cc976(0x1d9)],_0x31c1de=>{const _0x3215cf=_0x1cc976;_0x31c1de[_0x3215cf(0x19a)](),_0xb817ff['OPDxJ'](handleToneInput,_0x2af4dd[_0x3215cf(0x1ae)]);}),_0x6a0fe9[_0x1cc976(0x1a2)](_0xb817ff[_0x1cc976(0x1f1)],_0x26ce04=>{const _0x5f47f9=_0x1cc976;_0x26ce04[_0x5f47f9(0x19a)](),_0xb817ff[_0x5f47f9(0x2c3)](handleToneInput,_0x2af4dd[_0x5f47f9(0x1ae)]);},{'passive':![]}),toneButtonsDiv[_0x1cc976(0x204)](_0x6a0fe9);});}function updateSetupToggleLabel(){const _0x413363=a0_0x306675,_0x5b7820={'QUXgN':function(_0x3e5cb8,_0x3afde2){return _0x3e5cb8===_0x3afde2;}},_0x3c09f4=TEXTS[currentLang],_0x329887=_0x5b7820['QUXgN'](welcomePanel[_0x413363(0x218)][_0x413363(0x2c4)],_0x413363(0x286));setupToggle[_0x413363(0x1b2)]=_0x329887?_0x3c09f4[_0x413363(0x251)]:_0x3c09f4[_0x413363(0x2eb)];}function updateLanguageUI(){const _0xab2412=a0_0x306675,_0x55045e={'EeGLd':function(_0x2fae06){return _0x2fae06();},'stChE':function(_0x290108){return _0x290108();},'YEucB':function(_0x413562){return _0x413562();}},_0xdbd742=TEXTS[currentLang];titleEl[_0xab2412(0x1b2)]=_0xdbd742[_0xab2412(0x26b)],welcomeText[_0xab2412(0x1b2)]=_0xdbd742['welcome'],levelLabelEl['textContent']=_0xdbd742[_0xab2412(0x2e7)],deckLabelEl[_0xab2412(0x1b2)]=_0xdbd742[_0xab2412(0x2f3)],startBtn[_0xab2412(0x1b2)]=_0xdbd742['start'],scoreLabelEl['innerHTML']=_0xdbd742[_0xab2412(0x28c)]+_0xab2412(0x24e)+gameState[_0xab2412(0x28c)]+_0xab2412(0x1bd),comboLabelEl[_0xab2412(0x21e)]=_0xdbd742[_0xab2412(0x259)]+'\x20<span\x20id=\x22combo\x22>'+gameState[_0xab2412(0x259)]+_0xab2412(0x1bd),timerLabelEl[_0xab2412(0x21e)]=_0xdbd742[_0xab2412(0x277)]+'\x20<span\x20id=\x22time\x22>'+timeSpan['textContent']+_0xab2412(0x1bd),langBtn[_0xab2412(0x1b2)]=_0xdbd742['langBtn'],headerRestartBtn[_0xab2412(0x1b2)]=_0xdbd742[_0xab2412(0x1a9)],recordsTitleEl[_0xab2412(0x1b2)]=_0xdbd742[_0xab2412(0x1c4)],modalTitleEl['textContent']=_0xdbd742[_0xab2412(0x297)],nameLabelEl['textContent']=_0xdbd742[_0xab2412(0x2dd)],saveResultBtn['textContent']=_0xdbd742[_0xab2412(0x262)],closeResultBtn['textContent']=_0xdbd742[_0xab2412(0x21b)],restartBtn[_0xab2412(0x1b2)]=_0xdbd742['restart'],_0x55045e[_0xab2412(0x21d)](refreshPauseButtonText),gameOverText['textContent']=_0xdbd742[_0xab2412(0x2d2)];if(gameState[_0xab2412(0x22d)])statusLabel[_0xab2412(0x1b2)]=_0xdbd742[_0xab2412(0x22d)];_0x55045e['stChE'](buildToneButtons),_0x55045e[_0xab2412(0x21d)](renderRecords),_0x55045e[_0xab2412(0x230)](updateSetupToggleLabel);}langBtn[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),()=>{const _0x1303a4=a0_0x306675,_0x2f6b80={'MrxrE':function(_0x5c457d,_0x27b0e){return _0x5c457d===_0x27b0e;},'aqQhN':function(_0x2c7121){return _0x2c7121();}};currentLang=_0x2f6b80['MrxrE'](currentLang,'zh')?'en':'zh',_0x2f6b80[_0x1303a4(0x266)](updateLanguageUI);}),pauseBtn[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),()=>{const _0x12b377=a0_0x306675,_0x2b6245={'ZeGsq':function(_0x586769,_0x339af4){return _0x586769(_0x339af4);}};if(pauseBtn[_0x12b377(0x2a5)])return;_0x2b6245[_0x12b377(0x26e)](setPauseState,!gameState[_0x12b377(0x22d)]);}),setupToggle[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),()=>{const _0x5802ca=a0_0x306675,_0xc00d54={'vSaiu':function(_0xbd8d68,_0x5166a9){return _0xbd8d68===_0x5166a9;},'nacoa':_0x5802ca(0x286)},_0x2c7783=_0xc00d54[_0x5802ca(0x305)](welcomePanel[_0x5802ca(0x218)][_0x5802ca(0x2c4)],_0xc00d54[_0x5802ca(0x26a)]);welcomePanel['style'][_0x5802ca(0x2c4)]=_0x2c7783?_0x5802ca(0x1b9):_0xc00d54[_0x5802ca(0x26a)],updateSetupToggleLabel();});async function loadJSON(_0x4d66fa){const _0x4b1c97=a0_0x306675,_0x4d822f={'RYryI':function(_0x12fc77,_0x3548ec){return _0x12fc77(_0x3548ec);},'sOydu':'Failed\x20to\x20load\x20'},_0x7515a9=await _0x4d822f['RYryI'](fetch,_0x4d66fa);if(!_0x7515a9['ok'])throw new Error(_0x4d822f[_0x4b1c97(0x1a1)]+_0x4d66fa);return _0x7515a9['json']();}function extractToneSequenceFromId(_0x2bb7ff){const _0x29cc30=a0_0x306675,_0x27d722=_0x2bb7ff[_0x29cc30(0x30a)]('_'),_0x17befb=[];for(const _0x139a53 of _0x27d722){const _0x5737e9=_0x139a53[_0x29cc30(0x243)](/([1-5])$/);if(_0x5737e9)_0x17befb['push'](parseInt(_0x5737e9[0x1],0xa));else _0x17befb[_0x29cc30(0x2a6)](0x5);}return _0x17befb;}function buildCharsForEntry(_0x317d2a){const _0x498e43=a0_0x306675,_0xeb6ce5={'Omcxj':function(_0x288704,_0x427a54){return _0x288704(_0x427a54);}},_0x2951e2=_0x317d2a[_0x498e43(0x202)],_0xb572c2=_0xeb6ce5[_0x498e43(0x23c)](extractToneSequenceFromId,_0x317d2a['id']),_0xdf2f99=Math[_0x498e43(0x1eb)](_0x2951e2[_0x498e43(0x29a)],_0xb572c2[_0x498e43(0x29a)]),_0xdbe22b=[];for(let _0xe73c12=0x0;_0xe73c12<_0xdf2f99;_0xe73c12++){_0xdbe22b[_0x498e43(0x2a6)]({'char':_0x2951e2[_0xe73c12],'tone':_0xb572c2[_0xe73c12]});}return _0xdbe22b;}function deriveAudioUrl(_0xad91b2,_0x5e000b){const _0x270be6=a0_0x306675,_0x2fa0bd={'iYAYF':function(_0x1cc753,_0x2a290d){return _0x1cc753+_0x2a290d;},'qcPCY':function(_0x4faee2,_0x5ccc17){return _0x4faee2+_0x5ccc17;}},_0x1196fc=_0xad91b2['replace'](/\.json$/i,''),_0x5944ca=_0x5e000b[_0x270be6(0x30a)](/[\\/]/)[_0x270be6(0x1fc)]();return _0x2fa0bd[_0x270be6(0x2ba)](_0x2fa0bd['qcPCY'](_0x1196fc,'/'),_0x5944ca);}async function loadAllDatasets(){const _0x28ab95=a0_0x306675,_0x641086={'AdbIX':function(_0x2ad050,_0x4210de){return _0x2ad050(_0x4210de);},'AuzoL':_0x28ab95(0x291),'rKoHw':function(_0x418cab,_0x46a7f7){return _0x418cab+_0x46a7f7;},'dbLZC':_0x28ab95(0x1e8),'rtvFU':function(_0xf11c6a,_0x4fe9ca){return _0xf11c6a>_0x4fe9ca;},'wRrmS':function(_0x575a1c,_0x11a662){return _0x575a1c(_0x11a662);}},_0xf5ddab=await _0x641086[_0x28ab95(0x1c1)](loadJSON,_0x641086['AuzoL']),_0x1628f6=_0xf5ddab['datasets']||[],_0x12431a=new Map(),_0x408167=new Map();for(const _0x4245ae of _0x1628f6){try{const _0xc81d5a=_0x4245ae['split']('/')['pop'](),_0x2845fd=_0xc81d5a[_0x28ab95(0x243)](/^([a-zA-Z]+)(\d+)/);if(!_0x2845fd)continue;const _0x9d0588=_0x2845fd[0x1],_0x5471c5=_0x2845fd[0x2],_0x4279a9=_0x5471c5[0x0],_0x2fc0e0=_0x641086[_0x28ab95(0x29f)](_0x9d0588,_0x4279a9)['toUpperCase'](),_0x3a4b85=_0xc81d5a['replace'](/\.json$/i,''),_0x2c51d0=await _0x641086[_0x28ab95(0x1c1)](loadJSON,_0x4245ae);_0x2c51d0[_0x28ab95(0x201)](_0x3f661c=>{const _0x21976a=_0x28ab95;_0x3f661c['audioUrl']=deriveAudioUrl(_0x4245ae,_0x3f661c[_0x21976a(0x313)]||'');}),_0x408167['set'](_0x3a4b85,{'id':_0x3a4b85,'category':_0x2fc0e0,'displayName':_0x3a4b85[_0x28ab95(0x280)](),'entries':_0x2c51d0});if(!_0x12431a[_0x28ab95(0x25d)](_0x2fc0e0))_0x12431a[_0x28ab95(0x248)](_0x2fc0e0,[]);_0x12431a[_0x28ab95(0x301)](_0x2fc0e0)[_0x28ab95(0x2a6)](_0x3a4b85);}catch(_0x2d7c0f){console[_0x28ab95(0x220)](_0x641086[_0x28ab95(0x2c8)],_0x4245ae,_0x2d7c0f);}}for(const [_0x5a49ea,_0x5a0fe2]of _0x12431a['entries']()){_0x5a0fe2[_0x28ab95(0x228)]();}gameState['categories']=_0x12431a,gameState[_0x28ab95(0x2f0)]=_0x408167,levelSelect[_0x28ab95(0x21e)]='';const _0x7f09db=Array[_0x28ab95(0x1cf)](_0x12431a['keys']())[_0x28ab95(0x228)]();for(const _0x150dee of _0x7f09db){const _0x51f3dd=document['createElement'](_0x28ab95(0x2b3));_0x51f3dd[_0x28ab95(0x30b)]=_0x150dee,_0x51f3dd[_0x28ab95(0x1b2)]=_0x150dee,levelSelect[_0x28ab95(0x204)](_0x51f3dd);}_0x641086[_0x28ab95(0x2d4)](_0x7f09db['length'],0x0)&&(gameState[_0x28ab95(0x300)]=_0x7f09db[0x0],_0x641086[_0x28ab95(0x312)](populateDeckSelectForCategory,gameState[_0x28ab95(0x300)]));}function populateDeckSelectForCategory(_0x2c7982){const _0x3130f7=a0_0x306675,_0x334f9b=gameState[_0x3130f7(0x216)]['get'](_0x2c7982)||[];deckSelect[_0x3130f7(0x21e)]='',_0x334f9b[_0x3130f7(0x201)](_0x463e6a=>{const _0x325373=_0x3130f7,_0x29a422=gameState[_0x325373(0x2f0)][_0x325373(0x301)](_0x463e6a);if(!_0x29a422)return;const _0x5df910=document[_0x325373(0x264)](_0x325373(0x2b3));_0x5df910[_0x325373(0x30b)]=_0x29a422['id'],_0x5df910['textContent']=_0x29a422[_0x325373(0x1fe)],deckSelect[_0x325373(0x204)](_0x5df910);}),gameState[_0x3130f7(0x2de)]=_0x334f9b[_0x3130f7(0x29a)]?_0x334f9b[0x0]:null;}function startTimer(_0x5ac978=!![]){const _0x24e6b7=a0_0x306675,_0x510aa6={'JYFfZ':_0x24e6b7(0x197),'qCFdt':function(_0x29aaf3,_0x5ab1e7){return _0x29aaf3(_0x5ab1e7);},'LSwMe':function(_0x164754,_0x1a2adc,_0x582819){return _0x164754(_0x1a2adc,_0x582819);}},_0x4313a9=_0x510aa6[_0x24e6b7(0x1e0)]['split']('|');let _0x437611=0x0;while(!![]){switch(_0x4313a9[_0x437611++]){case'0':gameState['startTime']=performance[_0x24e6b7(0x275)]();continue;case'1':if(gameState['timerHandle'])_0x510aa6[_0x24e6b7(0x2d8)](clearInterval,gameState[_0x24e6b7(0x267)]);continue;case'2':gameState[_0x24e6b7(0x2a3)]=gameState[_0x24e6b7(0x1c7)];continue;case'3':gameState['timerHandle']=_0x510aa6[_0x24e6b7(0x1f6)](setInterval,updateTime,0x64);continue;case'4':gameState[_0x24e6b7(0x261)]=null;continue;case'5':if(_0x5ac978)gameState[_0x24e6b7(0x1c7)]=0x0;continue;case'6':gameState['paused']=![];continue;}break;}}function a0_0x5168(){const _0x74be22=['Kwdma','createElement','target','aqQhN','timerHandle','\x20-\x20','恭喜通关！','nacoa','title','PzLXe','xBuaU','ZeGsq',',\x20#333)','canvas-container','every','touchstart','请输入名字：','welcome-text','now','height','time','records-title','Zndbi','rlQdA','wdkvm','fJqrr','anonymous','1049615qeEGPy','save-result-btn','toUpperCase','游戏结束！','preload','pvAbA','0.0','result-modal','none','TGtox','4|3|2|0|1','strokeStyle','center','catch','score','iiBAx','HPZKt','FdQMM','start-btn','manifest.json','startTime','OKFXZ','#000','mgXuX','分数:','modalTitle','RBKMV','\x20\x20|\x20\x20⌨️\x20','length','88dRUeCH','restore','ROpBU','Deck:','rKoHw','color','combo-label','toString','lastElapsedSec','getContext','disabled','push','GKNjF','再来一次','Wefau','TDRHD','Combo:','#444','chars','4|2|0|1|3','QdhYq','QslVn','798FJKqiw','TcQWc','option','createGain','#3a3e49','JQqCN','声调方块','rlfGf','auto','iYAYF','deck-select','tone_tetris_records_v2','crossOrigin','current','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22tone-name\x22>','joHyW','Cfyip','WuIPp','RquhU','display','20mwVFyk','splice','JpSZI','dbLZC','awaitingInput','fillStyle','4th','OcMUM','clientWidth','charIndex','DwohW','Time:','bold\x20','gameOver','UtQfF','rtvFU','gZclZ','modal-summary','deck-label','qCFdt','pause','asaSF','findIndex','floor','nameLabel','currentDeckId','Dxgou','phraseQueue','tone-buttons','YcKYh','records-list','UaWNs','bHjQg','webkitAudioContext','levelLabel','soGrL','1965843OafEoi','sfx/miss.mp3','hideSetup','XzcGn','pause-btn','7031080KxqzEL','game-canvas','decksById','mfdpW','YIADb','deckLabel','resize','#ff4d4f','type','1st','BTlBG','Leaderboard','zIAKW','name','lang-btn','UGPGH','lvMil','142398zAfZzn','currentCategory','get','toFixed','getElementById','tone-btn','vSaiu','background','width','Restart','3rd','split','value','Cleared!','aTJIg','wSREt','cloneNode','clearRect','hocFH','wRrmS','audio','setup-toggle','BThzP','iRQXG','board','cErpI','level-label','slice','5|0|2|6|4|1|3','44JhqdpG','ZrpRM','preventDefault','</div>\x0a\x20\x20\x20\x20','Hide','xPzca','FAKxw','restart-btn','colIdx','sOydu','addEventListener','7185VMqyNi','CUuWo','miUVc','sbSvc','frequency','clientHeight','restart','currentTime','querySelector','dmKUW','hit','tone','textAlign','strokeRect','jRSYw','textContent','iDLjw','message','qvIHm','oDxAA','\x20pts,\x20','flex','block','currentPhrase','trim','用时:','</span>','Your\x20name:','hDxhv','GzvAJ','AdbIX','Error:\x20','close-result-btn','recordsTitle','wZRNX','cemhT','elapsedBaseSec','GEBen','shift','#40a9ff','请选择等级和词库开始练习。','fillRect','some','2nd','from','选择等级：','#fadb14','VHAsy','click','nuygX','tqTNy','targetRowIndex','已暂停','zrYAx','YoHuP','Player','#fff','WDWXe','px\x20sans-serif','stringify','audioObj','JYFfZ','Score:','nFzcr','sfx/wrong.mp3','entries','sSrLB','LxfSv','ZhjoR','Load\x20dataset\x20failed:','fallingBlocks','filter','min','sFhMW','QllrJ','jJsEL','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22tone-symbol\x22>','audio\x20play\x20failed','usTWJ','8024712fGUHJp','welcome-panel','ceil','start','LSwMe','symbol','status-label','createOscillator','game-over-overlay','cdfKH','pop','entry','displayName','bSxdk','wrong','forEach','text','zmvRQ','appendChild','Level:','BkCni','Lsnlq','dUOFt','Setup','AudioContext','urCDj','char','#73d13d','Game\x20Over!','oWBcC','Zeyqf','keydown','linear-gradient(to\x20bottom,\x20','rbzQy','dataset','setItem','categories','random','style','className','connect','close','play','EeGLd','innerHTML','Choose\x20level\x20and\x20deck.','warn','本局成绩','6|0|9|1|7|4|8|10|3|2|11|5','map','YUojd','eUbnS','Shehj','miss','sort','CnmTV','ZlZoA','zMWSF','geYoS','paused','colIndex','XlIRX','YEucB','answered','Pause','score-label','WDmfQ','phraseId','YraGA','key','current-text-label','ZbGZj','fillText','34modBoi','Omcxj','EgJOd','lineWidth','resume','roEZq','currentPhraseId','AUmoq','match','XrHjS','1265174Zqlzxl','yuVXo','NaFDo','set','len','gtfiE','EDAQQ','gOvlJ','2|0|4|1|3','\x20<span\x20id=\x22score\x22>','Qdkiq','trueTone','showSetup','Start','EgisT','over','RvPWA','XkobS','destination','成绩榜','combo','change','Paused','error','has','opwiB','xjsDc','Resume','lastFrameTime','save'];a0_0x5168=function(){return _0x74be22;};return a0_0x5168();}function updateTime(){const _0x185b57=a0_0x306675,_0x153aa9={'WuIPp':function(_0x412f11,_0x57666c){return _0x412f11+_0x57666c;},'sQLBr':function(_0x46ffb5,_0x253043){return _0x46ffb5/_0x253043;},'asaSF':function(_0xdc4b0b,_0x79adc6){return _0xdc4b0b-_0x79adc6;},'hDxhv':_0x185b57(0x277)};if(!gameState['startTime'])return;const _0x3b46b5=_0x153aa9[_0x185b57(0x2c2)](_0x153aa9['sQLBr'](_0x153aa9[_0x185b57(0x2da)](performance['now'](),gameState[_0x185b57(0x292)]),0x3e8),gameState['elapsedBaseSec']||0x0);gameState['lastElapsedSec']=_0x3b46b5;const _0x5db38f=document[_0x185b57(0x303)](_0x153aa9[_0x185b57(0x1bf)]);if(_0x5db38f)_0x5db38f['textContent']=_0x3b46b5[_0x185b57(0x302)](0x1);}function pauseTimer(){const _0xd20be5=a0_0x306675,_0x3b91ba={'EDAQQ':'1|4|3|2|0','qvIHm':function(_0x6a2a21,_0x3aee35){return _0x6a2a21(_0x3aee35);},'nFzcr':function(_0x2403ec){return _0x2403ec();}},_0xc29d34=_0x3b91ba[_0xd20be5(0x24b)][_0xd20be5(0x30a)]('|');let _0x184d7e=0x0;while(!![]){switch(_0xc29d34[_0x184d7e++]){case'0':gameState[_0xd20be5(0x267)]&&(_0x3b91ba[_0xd20be5(0x1b5)](clearInterval,gameState[_0xd20be5(0x267)]),gameState[_0xd20be5(0x267)]=null);continue;case'1':if(!gameState[_0xd20be5(0x292)])return;continue;case'2':gameState[_0xd20be5(0x292)]=null;continue;case'3':gameState[_0xd20be5(0x1c7)]=gameState[_0xd20be5(0x2a3)];continue;case'4':_0x3b91ba[_0xd20be5(0x1e2)](updateTime);continue;}break;}}function resumeTimer(){const _0x5407d0=a0_0x306675,_0xf9a8e4={'Shehj':function(_0x160030,_0x308cce){return _0x160030(_0x308cce);},'XrHjS':function(_0x18cefe,_0x46f517,_0x58cd88){return _0x18cefe(_0x46f517,_0x58cd88);}};if(gameState[_0x5407d0(0x2d2)]||gameState['startTime'])return;gameState['startTime']=performance[_0x5407d0(0x275)]();if(gameState[_0x5407d0(0x267)])_0xf9a8e4[_0x5407d0(0x226)](clearInterval,gameState['timerHandle']);gameState['timerHandle']=_0xf9a8e4[_0x5407d0(0x244)](setInterval,updateTime,0x64);}function stopTimer(){const _0x1f6372=a0_0x306675,_0x14cd80={'YUojd':function(_0x117446){return _0x117446();},'zfOdO':function(_0x1a9993,_0x1b6e6c){return _0x1a9993(_0x1b6e6c);}};if(gameState[_0x1f6372(0x292)])_0x14cd80[_0x1f6372(0x224)](updateTime);gameState[_0x1f6372(0x267)]&&(_0x14cd80['zfOdO'](clearInterval,gameState[_0x1f6372(0x267)]),gameState['timerHandle']=null),gameState['startTime']=null,gameState[_0x1f6372(0x1c7)]=gameState[_0x1f6372(0x2a3)]||gameState[_0x1f6372(0x1c7)]||0x0;}function refreshPauseButtonText(){const _0x4ce49c=a0_0x306675,_0x4e3cd2=TEXTS[currentLang];pauseBtn['textContent']=gameState[_0x4ce49c(0x22d)]?_0x4e3cd2[_0x4ce49c(0x23f)]:_0x4e3cd2[_0x4ce49c(0x2d9)];}function setPauseState(_0x114547){const _0x47f3a3=a0_0x306675,_0x4aa388={'lvMil':function(_0x1bbce3){return _0x1bbce3();},'JpSZI':function(_0x34acb9,_0x8e674d){return _0x34acb9(_0x8e674d);},'yuVXo':function(_0x487128){return _0x487128();}};if(gameState[_0x47f3a3(0x2d2)])return;if(_0x114547){if(gameState['paused'])return;gameState[_0x47f3a3(0x22d)]=!![],_0x4aa388[_0x47f3a3(0x2fe)](pauseTimer),statusLabel[_0x47f3a3(0x1b2)]=TEXTS[currentLang][_0x47f3a3(0x22d)];}else{if(!gameState['paused'])return;gameState[_0x47f3a3(0x22d)]=![],statusLabel[_0x47f3a3(0x1b2)]='',_0x4aa388[_0x47f3a3(0x2fe)](resumeTimer),gameState[_0x47f3a3(0x261)]=null,_0x4aa388[_0x47f3a3(0x2c7)](requestAnimationFrame,animate);}_0x4aa388[_0x47f3a3(0x246)](refreshPauseButtonText);}const SFX_FILES={'hit':'sfx/hit.mp3','miss':a0_0x306675(0x2ea),'wrong':a0_0x306675(0x1e3)},sfxCache={};let sfxContext=null;function playBeep(_0x58524e=0x370,_0x3833af=0.08){const _0x2999f5=a0_0x306675,_0x4fc1b2={'NaFDo':'sine','xPzca':function(_0x21ec05,_0x3f7e55){return _0x21ec05+_0x3f7e55;}};try{if(!sfxContext)sfxContext=new(window[(_0x2999f5(0x20a))]||window[(_0x2999f5(0x2e6))])();const _0x22ecb2=sfxContext,_0x52380d=_0x22ecb2[_0x2999f5(0x1f9)](),_0x579e63=_0x22ecb2[_0x2999f5(0x2b4)]();_0x52380d[_0x2999f5(0x2f6)]=_0x4fc1b2[_0x2999f5(0x247)],_0x52380d[_0x2999f5(0x1a7)][_0x2999f5(0x30b)]=_0x58524e,_0x579e63['gain'][_0x2999f5(0x30b)]=0.1,_0x52380d[_0x2999f5(0x21a)](_0x579e63)['connect'](_0x22ecb2[_0x2999f5(0x257)]),_0x52380d[_0x2999f5(0x1f5)](),_0x52380d['stop'](_0x4fc1b2[_0x2999f5(0x19d)](_0x22ecb2[_0x2999f5(0x1aa)],_0x3833af));}catch(_0x1a35d3){}}function preloadSfx(){const _0x51bbf2=a0_0x306675,_0x307dec={'gOvlJ':_0x51bbf2(0x2b9)};Object[_0x51bbf2(0x1e4)](SFX_FILES)[_0x51bbf2(0x201)](([_0x4749e8,_0x9930c7])=>{const _0xfc4f51=_0x51bbf2,_0x373124=new Audio(_0x9930c7);_0x373124[_0xfc4f51(0x282)]=_0x307dec[_0xfc4f51(0x24c)],sfxCache[_0x4749e8]=_0x373124;});}function playSfx(_0x364ae3,_0x38af13=0x294){const _0x2dbe4b=a0_0x306675,_0x430a7d={'wSREt':function(_0x4f820b,_0x80f7c6){return _0x4f820b(_0x80f7c6);}},_0x118a42=sfxCache[_0x364ae3];if(!_0x118a42){_0x430a7d['wSREt'](playBeep,_0x38af13);return;}try{const _0x53d73a=_0x118a42[_0x2dbe4b(0x30f)]();_0x53d73a['currentTime']=0x0,_0x53d73a[_0x2dbe4b(0x21c)]()[_0x2dbe4b(0x28b)](()=>playBeep(_0x38af13));}catch(_0x457375){_0x430a7d[_0x2dbe4b(0x30e)](playBeep,_0x38af13);}}function resetBoard(){const _0x4c8447=a0_0x306675;gameState[_0x4c8447(0x193)]=[[],[],[],[],[]],gameState[_0x4c8447(0x1e9)]=[];}function hideGameOverOverlay(){const _0x49f5e9=a0_0x306675;gameOverOverlay['style'][_0x49f5e9(0x2c4)]=_0x49f5e9(0x286);}function showGameOverOverlay(){const _0x5d99ca=a0_0x306675,_0x507e4f={'ozmCM':_0x5d99ca(0x1b8)};gameOverOverlay[_0x5d99ca(0x218)]['display']=_0x507e4f['ozmCM'];}function resetGameStateForCurrentDeck(){const _0x5cc113=a0_0x306675,_0x3fda98={'TcQWc':_0x5cc113(0x277),'cemhT':function(_0x59096d){return _0x59096d();},'zIAKW':function(_0x44043d){return _0x44043d();}},_0x753d06=gameState[_0x5cc113(0x2f0)][_0x5cc113(0x301)](gameState[_0x5cc113(0x2de)]);if(!_0x753d06)return;const _0x51cb5c=_0x753d06[_0x5cc113(0x1e4)]||[],_0x67c48=_0x51cb5c['slice']()[_0x5cc113(0x228)](()=>Math[_0x5cc113(0x217)]()-0.5);gameState[_0x5cc113(0x2e0)]=_0x67c48,gameState['currentPhrase']=null,gameState['currentCharIndex']=0x0,gameState['currentPhraseId']=null,gameState[_0x5cc113(0x28c)]=0x0,gameState['combo']=0x0,gameState[_0x5cc113(0x2d2)]=![],gameState[_0x5cc113(0x2c9)]=![],gameState['paused']=![],gameState[_0x5cc113(0x292)]=null,gameState[_0x5cc113(0x2a3)]=0x0,gameState[_0x5cc113(0x1c7)]=0x0;const _0x58b609=document[_0x5cc113(0x303)](_0x3fda98[_0x5cc113(0x2b2)]);if(_0x58b609)_0x58b609['textContent']=_0x5cc113(0x284);_0x3fda98[_0x5cc113(0x1c6)](resetBoard),_0x3fda98[_0x5cc113(0x1c6)](updateScoreUI),statusLabel[_0x5cc113(0x1b2)]='',currentTextLabel[_0x5cc113(0x1b2)]='',_0x3fda98[_0x5cc113(0x1c6)](hideGameOverOverlay),pauseBtn[_0x5cc113(0x2a5)]=!![],_0x3fda98[_0x5cc113(0x2fa)](refreshPauseButtonText);}function updateScoreUI(){const _0x358e5f=a0_0x306675,_0x2a0da8={'SbNGc':'score','wcujG':'combo'},_0x35238b=document[_0x358e5f(0x303)](_0x2a0da8['SbNGc']),_0x58cc53=document[_0x358e5f(0x303)](_0x2a0da8['wcujG']);if(_0x35238b)_0x35238b['textContent']=gameState[_0x358e5f(0x28c)];if(_0x58cc53)_0x58cc53['textContent']=gameState[_0x358e5f(0x259)];}function playCurrentAudio(_0xaffdfb){const _0x257ace=a0_0x306675,_0x2c740e={'TDRHD':_0x257ace(0x2b9),'Kwdma':_0x257ace(0x27d)};if(gameState['audioObj'])gameState[_0x257ace(0x1df)]['pause']();if(!_0xaffdfb)return![];const _0x12dfcf=_0xaffdfb['audioUrl']||_0xaffdfb[_0x257ace(0x313)];if(!_0x12dfcf)return![];const _0x5a3886=new Audio(_0x12dfcf);return _0x5a3886[_0x257ace(0x282)]=_0x2c740e[_0x257ace(0x2aa)],_0x5a3886[_0x257ace(0x2bd)]=_0x2c740e[_0x257ace(0x263)],_0x5a3886['currentTime']=0x0,gameState[_0x257ace(0x1df)]=_0x5a3886,_0x5a3886[_0x257ace(0x21c)]()[_0x257ace(0x28b)](_0xf727e8=>console[_0x257ace(0x220)](_0x257ace(0x1f0),_0xf727e8)),!![];}function spawnPhraseBlocks(_0xf4d546){const _0x8212a5=a0_0x306675,_0x5178fb={'fJqrr':function(_0x530588,_0x1aacac){return _0x530588/_0x1aacac;},'OcMUM':function(_0x51c458,_0x360c7e){return _0x51c458/_0x360c7e;},'AuoLQ':function(_0x436e21,_0x3a5e9a){return _0x436e21<_0x3a5e9a;},'miUVc':function(_0x211509,_0x5ac231){return _0x211509+_0x5ac231;},'rlfGf':function(_0x227a8b,_0x36e632){return _0x227a8b>=_0x36e632;},'Qdkiq':function(_0x3db72b,_0x4fe385){return _0x3db72b(_0x4fe385);},'ZrpRM':function(_0x1ecf5b,_0x206961){return _0x1ecf5b+_0x206961;},'RBKMV':function(_0x18ffcc,_0x1f4ce5){return _0x18ffcc*_0x1f4ce5;}},_0xb24bfb=_0xf4d546[_0x8212a5(0x2ad)],_0x31b927=Math[_0x8212a5(0x1f4)](_0x5178fb[_0x8212a5(0x27c)](_0xb24bfb[_0x8212a5(0x29a)],0x5)),_0x30635e=gameState[_0x8212a5(0x193)][_0x8212a5(0x223)](_0x22b4c2=>_0x22b4c2['length']),_0x342006=-_0x31b927*_0x5178fb[_0x8212a5(0x2cc)](canvas[_0x8212a5(0x276)],MAX_ROWS)-0x32;for(let _0x374a2c=0x0;_0x5178fb['AuoLQ'](_0x374a2c,_0xb24bfb[_0x8212a5(0x29a)]);_0x374a2c++){const _0x250a8f=_0x374a2c%0x5,_0x89fe5c=Math[_0x8212a5(0x2dc)](_0x5178fb[_0x8212a5(0x27c)](_0x374a2c,0x5)),_0x4621a9=_0x31b927-0x1-_0x89fe5c,_0x4b6e9b=_0x5178fb[_0x8212a5(0x1a5)](_0x30635e[_0x250a8f],_0x4621a9);if(_0x5178fb[_0x8212a5(0x2b8)](_0x4b6e9b,MAX_ROWS)){_0x5178fb[_0x8212a5(0x24f)](finishGame,_0x8212a5(0x254));return;}gameState[_0x8212a5(0x1e9)][_0x8212a5(0x2a6)]({'char':_0xb24bfb[_0x374a2c]['char'],'trueTone':_0xb24bfb[_0x374a2c][_0x8212a5(0x1ae)],'colIdx':_0x250a8f,'targetRowIndex':_0x4b6e9b,'y':_0x5178fb[_0x8212a5(0x199)](_0x342006,_0x5178fb[_0x8212a5(0x298)](_0x89fe5c,_0x5178fb[_0x8212a5(0x2cc)](canvas['height'],MAX_ROWS))),'phraseId':_0xf4d546['id'],'charIndex':_0x374a2c});}}function nextPhrase(){const _0xc2b2e0=a0_0x306675,_0x50de95={'sSrLB':function(_0x6b6723,_0xbaebac){return _0x6b6723>_0xbaebac;},'QynOb':function(_0x4e46fe,_0x41284f){return _0x4e46fe(_0x41284f);},'tqTNy':'clear','ZhjoR':function(_0x255055,_0x27a14e){return _0x255055(_0x27a14e);},'MvPRo':function(_0xb97dec,_0xb388a){return _0xb97dec===_0xb388a;},'ZlZoA':function(_0x572e3c){return _0x572e3c();},'gtfiE':function(_0x1e7fde,_0x5193ee){return _0x1e7fde(_0x5193ee);}};if(gameState[_0xc2b2e0(0x2d2)])return;if(_0x50de95[_0xc2b2e0(0x1e5)](gameState[_0xc2b2e0(0x1e9)][_0xc2b2e0(0x29a)],0x0))return;if(gameState[_0xc2b2e0(0x2e0)][_0xc2b2e0(0x29a)]===0x0){_0x50de95['QynOb'](finishGame,_0x50de95[_0xc2b2e0(0x1d5)]);return;}const _0x265637=gameState[_0xc2b2e0(0x2e0)][_0xc2b2e0(0x1c9)](),_0x243a32=_0x50de95[_0xc2b2e0(0x1e7)](buildCharsForEntry,_0x265637);if(_0x50de95['MvPRo'](_0x243a32[_0xc2b2e0(0x29a)],0x0))return _0x50de95[_0xc2b2e0(0x22a)](nextPhrase);const _0x42ac55=Date[_0xc2b2e0(0x275)]()+'_'+Math['random']()[_0xc2b2e0(0x2a2)](0x10)[_0xc2b2e0(0x196)](0x2);gameState[_0xc2b2e0(0x1ba)]={'entry':_0x265637,'chars':_0x243a32,'answered':new Array(_0x243a32[_0xc2b2e0(0x29a)])['fill'](![]),'id':_0x42ac55},gameState[_0xc2b2e0(0x241)]=_0x42ac55,gameState['currentCharIndex']=0x0,gameState[_0xc2b2e0(0x2c9)]=!![];const _0x301080=TEXTS[currentLang],_0x1cb029=_0x243a32[0x0]?.[_0xc2b2e0(0x20c)]||'';currentTextLabel[_0xc2b2e0(0x1b2)]=_0x301080[_0xc2b2e0(0x2be)]+'\x20'+_0x265637[_0xc2b2e0(0x202)]+_0xc2b2e0(0x299)+_0x1cb029,_0x50de95[_0xc2b2e0(0x24a)](spawnPhraseBlocks,gameState[_0xc2b2e0(0x1ba)]),_0x50de95['gtfiE'](playCurrentAudio,_0x265637);}function markCharAnswered(_0x5cb77d,_0x1a5235){const _0x31ead6=a0_0x306675,_0xd7a477={'oWBcC':function(_0x3e9e68,_0x58cd53){return _0x3e9e68>=_0x58cd53;},'FdQMM':function(_0x40a14f){return _0x40a14f();}},_0x2c62c1=gameState[_0x31ead6(0x1ba)];if(!_0x2c62c1)return;if(_0x2c62c1[_0x31ead6(0x231)][_0x5cb77d])return;_0x2c62c1['answered'][_0x5cb77d]=!![];const _0x7c7dec=_0x2c62c1['answered']['findIndex'](_0x54ed1d=>!_0x54ed1d),_0x19a11f=TEXTS[currentLang];if(_0xd7a477[_0x31ead6(0x20f)](_0x7c7dec,0x0)){const _0x2895b5=_0x2c62c1[_0x31ead6(0x2ad)][_0x7c7dec]?.['char']||'';currentTextLabel[_0x31ead6(0x1b2)]=_0x19a11f[_0x31ead6(0x2be)]+'\x20'+_0x2c62c1[_0x31ead6(0x1fd)][_0x31ead6(0x202)]+_0x31ead6(0x299)+_0x2895b5;}!_0x1a5235&&(gameState[_0x31ead6(0x259)]=0x0,_0xd7a477[_0x31ead6(0x28f)](updateScoreUI));}function tryFinishPhrase(){const _0x1fd2aa=a0_0x306675,_0x350d52={'yWtGB':function(_0x3002bc){return _0x3002bc();},'mxVTW':function(_0x299767,_0x351c52){return _0x299767&&_0x351c52;},'RqVGh':function(_0x1526ad,_0x20f745,_0x1e70cd){return _0x1526ad(_0x20f745,_0x1e70cd);}},_0x2cbabd=gameState[_0x1fd2aa(0x1ba)];if(!_0x2cbabd)return;const _0x496c30=_0x2cbabd[_0x1fd2aa(0x231)][_0x1fd2aa(0x271)](Boolean),_0x1beba9=gameState[_0x1fd2aa(0x1e9)][_0x1fd2aa(0x1cd)](_0x1250d1=>_0x1250d1[_0x1fd2aa(0x235)]===_0x2cbabd['id']);if(_0x350d52['mxVTW'](_0x496c30,!_0x1beba9))gameState[_0x1fd2aa(0x2c9)]=![],gameState['currentPhrase']=null,currentTextLabel[_0x1fd2aa(0x1b2)]='',_0x350d52['RqVGh'](setTimeout,()=>{const _0x1e7f66=_0x1fd2aa;if(!gameState[_0x1e7f66(0x2d2)])_0x350d52['yWtGB'](nextPhrase);},0xc8);else _0x496c30&&(gameState[_0x1fd2aa(0x2c9)]=![]);}function handleToneInput(_0x4d5d19){const _0xf76d48=a0_0x306675,_0xca294f={'gZclZ':function(_0x3b45d4,_0x72b4c8){return _0x3b45d4===_0x72b4c8;},'jJsEL':function(_0x343cc0){return _0x343cc0();},'bHjQg':function(_0x2a72f7,_0x57ebd0){return _0x2a72f7>=_0x57ebd0;},'iiBAx':function(_0x47b246,_0x4775c7,_0x48c3d1){return _0x47b246(_0x4775c7,_0x48c3d1);},'UtQfF':_0xf76d48(0x1ad),'EgisT':function(_0x205901){return _0x205901();},'oDxAA':function(_0x4e6284,_0x49a014,_0x39bf25){return _0x4e6284(_0x49a014,_0x39bf25);}};if(gameState['gameOver']||gameState['paused']||!gameState[_0xf76d48(0x2c9)])return;const _0x4d663a=gameState[_0xf76d48(0x1ba)];if(!_0x4d663a)return;const _0x2b37a6=_0x4d663a[_0xf76d48(0x231)][_0xf76d48(0x2db)](_0x6bf47e=>!_0x6bf47e);if(_0xca294f[_0xf76d48(0x2d5)](_0x2b37a6,-0x1))return;const _0x5d4316=_0x4d663a[_0xf76d48(0x2ad)][_0x2b37a6],_0x4c4f18=_0x5d4316[_0xf76d48(0x1ae)];if(_0xca294f['gZclZ'](_0x4d5d19,_0x4c4f18)){gameState[_0xf76d48(0x28c)]+=0xa,gameState[_0xf76d48(0x259)]+=0x1,_0xca294f[_0xf76d48(0x1ee)](updateScoreUI);const _0x2562e2=gameState[_0xf76d48(0x1e9)]['findIndex'](_0x3fa5b8=>_0x3fa5b8[_0xf76d48(0x235)]===_0x4d663a['id']&&_0x3fa5b8['charIndex']===_0x2b37a6);_0xca294f[_0xf76d48(0x2e5)](_0x2562e2,0x0)&&gameState[_0xf76d48(0x1e9)][_0xf76d48(0x2c6)](_0x2562e2,0x1),_0xca294f[_0xf76d48(0x28d)](playSfx,_0xca294f[_0xf76d48(0x2d3)],0x4b0),markCharAnswered(_0x2b37a6,!![]),_0xca294f[_0xf76d48(0x1ee)](tryFinishPhrase);}else _0xca294f[_0xf76d48(0x253)](updateScoreUI),_0xca294f['iiBAx'](playSfx,_0xf76d48(0x200),0x140),_0xca294f[_0xf76d48(0x1b6)](markCharAnswered,_0x2b37a6,![]),settleWrongToneBlock(_0x4d663a['id'],_0x2b37a6,_0x4d5d19,_0x5d4316);}function settleWrongToneBlock(_0x293f10,_0x4b30b2,_0x31b80c,_0xc52b3a){const _0x4e8945=a0_0x306675,_0x353a77={'BThzP':function(_0x2cd0c5,_0x340cbe){return _0x2cd0c5>=_0x340cbe;},'dUOFt':function(_0x3b410b,_0x3608fb){return _0x3b410b+_0x3608fb;},'cErpI':function(_0x6408af,_0x31f3bb){return _0x6408af-_0x31f3bb;},'sbSvc':function(_0x27c87f,_0x123627){return _0x27c87f-_0x123627;},'YcKYh':function(_0x255390,_0x301342){return _0x255390/_0x301342;},'itukQ':function(_0x210f62,_0xf05b7b){return _0x210f62(_0xf05b7b);}},_0x5ca581=TONES['find'](_0x57993f=>_0x57993f['tone']===_0x31b80c);if(!_0x5ca581)return;const _0x5ace82=gameState[_0x4e8945(0x1e9)]['findIndex'](_0x205a97=>_0x205a97[_0x4e8945(0x235)]===_0x293f10&&_0x205a97[_0x4e8945(0x2ce)]===_0x4b30b2);if(_0x353a77[_0x4e8945(0x315)](_0x5ace82,0x0))gameState[_0x4e8945(0x1e9)][_0x4e8945(0x2c6)](_0x5ace82,0x1);const _0x1bf90c=gameState[_0x4e8945(0x193)][_0x5ca581['colIndex']]['length'],_0x33e31a=gameState[_0x4e8945(0x1e9)][_0x4e8945(0x1ea)](_0x586055=>_0x586055['colIdx']===_0x5ca581[_0x4e8945(0x22e)])['length'],_0x460f7b=_0x353a77[_0x4e8945(0x208)](_0x1bf90c,_0x33e31a),_0x483ccc={'char':_0xc52b3a[_0x4e8945(0x20c)],'trueTone':_0xc52b3a[_0x4e8945(0x1ae)],'colIdx':_0x5ca581['colIndex'],'targetRowIndex':_0x460f7b,'y':_0x353a77[_0x4e8945(0x194)](_0x353a77[_0x4e8945(0x1a6)](MAX_ROWS,0x1),_0x460f7b)*_0x353a77[_0x4e8945(0x2e2)](canvas[_0x4e8945(0x276)],MAX_ROWS),'phraseId':_0x293f10,'charIndex':_0x4b30b2};_0x353a77['itukQ'](finalizeLanding,_0x483ccc);}function finalizeLanding(_0x555f25){const _0xb20b30=a0_0x306675,_0x2a047d={'pvAbA':function(_0xcf5620,_0x2a68ac){return _0xcf5620===_0x2a68ac;},'HPZKt':function(_0x42e902,_0x470676,_0x1b851e){return _0x42e902(_0x470676,_0x1b851e);},'cdfKH':function(_0x1e4ef4){return _0x1e4ef4();},'dmKUW':function(_0x5a974d,_0x3c224b){return _0x5a974d(_0x3c224b);},'iAOXn':'over'},_0x39ee80=_0x555f25[_0xb20b30(0x1a0)],_0x7e577a=gameState[_0xb20b30(0x193)][_0x39ee80],_0x544867=gameState['currentPhrase']&&_0x2a047d[_0xb20b30(0x283)](_0x555f25[_0xb20b30(0x235)],gameState[_0xb20b30(0x1ba)]['id']),_0x25cd49=_0x544867&&gameState[_0xb20b30(0x1ba)][_0xb20b30(0x231)][_0x555f25[_0xb20b30(0x2ce)]];if(_0x544867&&!_0x25cd49){const _0x1884bb=_0xb20b30(0x24d)[_0xb20b30(0x30a)]('|');let _0x23ca09=0x0;while(!![]){switch(_0x1884bb[_0x23ca09++]){case'0':_0x2a047d['HPZKt'](markCharAnswered,_0x555f25['charIndex'],![]);continue;case'1':_0x2a047d['cdfKH'](tryFinishPhrase);continue;case'2':_0x2a047d[_0xb20b30(0x28e)](playSfx,_0xb20b30(0x227),0x1b8);continue;case'3':return;case'4':_0x2a047d[_0xb20b30(0x1ac)](applyPenaltyRows,0x1);continue;}break;}}_0x7e577a['push']({'char':_0x555f25[_0xb20b30(0x20c)],'trueTone':_0x555f25[_0xb20b30(0x250)]});if(_0x7e577a[_0xb20b30(0x29a)]>MAX_ROWS){finishGame(_0x2a047d['iAOXn']);return;}_0x2a047d['dmKUW'](checkColumnForClear,_0x39ee80),_0x2a047d[_0xb20b30(0x1fb)](tryFinishPhrase);}function applyPenaltyRows(_0x2e4f14){const _0x21469b=a0_0x306675,_0x52099b={'iRQXG':function(_0x5743ed,_0x72bb76){return _0x5743ed<_0x72bb76;},'CUuWo':function(_0x8b5c70,_0x612f93){return _0x8b5c70-_0x612f93;},'SBYak':function(_0x243cb6,_0x3bf96f){return _0x243cb6<_0x3bf96f;}};for(let _0x19ecc9=0x0;_0x52099b[_0x21469b(0x316)](_0x19ecc9,0x5);_0x19ecc9++){const _0x4d6c4a=gameState[_0x21469b(0x193)][_0x19ecc9],_0x4dc851=Math['max'](0x0,_0x52099b[_0x21469b(0x1a4)](MAX_ROWS,_0x4d6c4a[_0x21469b(0x29a)])),_0x4c4d0b=Math[_0x21469b(0x1eb)](_0x2e4f14,_0x4dc851);for(let _0x39ed0b=0x0;_0x52099b['SBYak'](_0x39ed0b,_0x4c4d0b);_0x39ed0b++){_0x4d6c4a[_0x21469b(0x2a6)]({'char':'','trueTone':0x0});}}}function checkColumnForClear(_0x301fe2){const _0x1a6fcb=a0_0x306675,_0x1705de={'AeIxE':function(_0x55c8e1,_0x552051){return _0x55c8e1<_0x552051;},'wZRNX':function(_0x4f6fed,_0xad784e){return _0x4f6fed<_0xad784e;},'EgJOd':function(_0x2e3fe1,_0x54488c){return _0x2e3fe1>_0x54488c;},'zmvRQ':function(_0x5046f7,_0x2776ea){return _0x5046f7>=_0x2776ea;},'GzvAJ':function(_0x29b003,_0x36fa81){return _0x29b003===_0x36fa81;},'WDmfQ':function(_0x58920e,_0x3ace3b){return _0x58920e!==_0x3ace3b;},'BkCni':function(_0x1d5aa4,_0xd2c833){return _0x1d5aa4>=_0xd2c833;},'mgXuX':function(_0x285ac0,_0x2151b6){return _0x285ac0*_0x2151b6;},'Lsnlq':function(_0x4d3715){return _0x4d3715();},'WDWXe':function(_0x2fb251,_0x5da6bc){return _0x2fb251<_0x5da6bc;},'JQqCN':function(_0x4a8f47,_0x4ebb5e){return _0x4a8f47+_0x4ebb5e;},'jRSYw':function(_0x97a23f,_0x9cc701,_0x17ac04){return _0x97a23f(_0x9cc701,_0x17ac04);}},_0x5064b0=gameState['board'][_0x301fe2];if(_0x1705de['AeIxE'](_0x5064b0[_0x1a6fcb(0x29a)],0x5))return;let _0x411712=null,_0x55b62e=0x0,_0x3bb052=0x0;const _0x2617ef=[];for(let _0x4d06a0=0x0;_0x4d06a0<_0x5064b0[_0x1a6fcb(0x29a)];_0x4d06a0++){const _0x438438=_0x5064b0[_0x4d06a0];if(!_0x438438['trueTone']||_0x1705de[_0x1a6fcb(0x1c5)](_0x438438[_0x1a6fcb(0x250)],0x1)||_0x1705de[_0x1a6fcb(0x23d)](_0x438438[_0x1a6fcb(0x250)],0x5)){if(_0x1705de[_0x1a6fcb(0x203)](_0x3bb052,0x5))_0x2617ef['push']({'start':_0x55b62e,'len':_0x3bb052,'tone':_0x411712});_0x411712=null,_0x3bb052=0x0;continue;}if(_0x1705de[_0x1a6fcb(0x1c0)](_0x411712,null)||_0x1705de[_0x1a6fcb(0x234)](_0x438438[_0x1a6fcb(0x250)],_0x411712)){if(_0x1705de['BkCni'](_0x3bb052,0x5))_0x2617ef[_0x1a6fcb(0x2a6)]({'start':_0x55b62e,'len':_0x3bb052,'tone':_0x411712});_0x411712=_0x438438[_0x1a6fcb(0x250)],_0x55b62e=_0x4d06a0,_0x3bb052=0x1;}else _0x3bb052++;}if(_0x1705de['BkCni'](_0x3bb052,0x5))_0x2617ef[_0x1a6fcb(0x2a6)]({'start':_0x55b62e,'len':_0x3bb052,'tone':_0x411712});if(_0x2617ef[_0x1a6fcb(0x29a)]===0x0)return;const _0x51a895=_0x2617ef[0x0];gameState['score']+=_0x1705de[_0x1a6fcb(0x295)](_0x51a895[_0x1a6fcb(0x249)],0xa),gameState['combo']+=0x1,_0x1705de[_0x1a6fcb(0x207)](updateScoreUI);const _0xc1d829=[];for(let _0x1c0df8=0x0;_0x1705de[_0x1a6fcb(0x1dc)](_0x1c0df8,_0x5064b0['length']);_0x1c0df8++){(_0x1c0df8<_0x51a895[_0x1a6fcb(0x1f5)]||_0x1705de[_0x1a6fcb(0x206)](_0x1c0df8,_0x1705de[_0x1a6fcb(0x2b6)](_0x51a895[_0x1a6fcb(0x1f5)],_0x51a895[_0x1a6fcb(0x249)])))&&_0xc1d829[_0x1a6fcb(0x2a6)](_0x5064b0[_0x1c0df8]);}gameState[_0x1a6fcb(0x193)][_0x301fe2]=_0xc1d829,_0x1705de[_0x1a6fcb(0x1b1)](playSfx,_0x1a6fcb(0x1ad),0x5dc);}function finishGame(_0x40c51b){const _0x5e37ab=a0_0x306675,_0x19faf3={'XzcGn':function(_0x3fe180){return _0x3fe180();},'RvPWA':function(_0x2613bf,_0x339be8){return _0x2613bf===_0x339be8;},'Dxgou':'over','TcSzO':_0x5e37ab(0x1b9)};if(gameState[_0x5e37ab(0x2d2)])return;gameState['gameOver']=!![],gameState[_0x5e37ab(0x2c9)]=![],stopTimer();if(gameState['paused'])_0x19faf3['XzcGn'](pauseTimer);gameState['paused']=![],pauseBtn[_0x5e37ab(0x2a5)]=!![],refreshPauseButtonText();const _0x2f740d=TEXTS[currentLang];statusLabel['textContent']=_0x19faf3[_0x5e37ab(0x255)](_0x40c51b,_0x5e37ab(0x254))?_0x2f740d[_0x5e37ab(0x2d2)]:_0x2f740d['gameClear'];_0x40c51b===_0x19faf3[_0x5e37ab(0x2df)]?_0x19faf3['XzcGn'](showGameOverOverlay):_0x19faf3[_0x5e37ab(0x2ec)](hideGameOverOverlay);const _0x14a8de=gameState[_0x5e37ab(0x2a3)][_0x5e37ab(0x302)](0x1),_0x1d8dc2=(gameState[_0x5e37ab(0x2de)]||'')[_0x5e37ab(0x280)]();modalSummaryEl[_0x5e37ab(0x1b2)]=_0x1d8dc2+'\x0a'+_0x2f740d[_0x5e37ab(0x28c)]+'\x20'+gameState[_0x5e37ab(0x28c)]+'\x0a'+_0x2f740d[_0x5e37ab(0x277)]+'\x20'+_0x14a8de+'s',playerNameInput['value']='',resultModal[_0x5e37ab(0x218)]['display']=_0x19faf3['TcSzO'];}function resizeCanvas(){const _0x508c43=a0_0x306675,_0x1f7d12={'wdkvm':function(_0x4e0036,_0x3feb87){return _0x4e0036/_0x3feb87;},'xjsDc':function(_0x416a63,_0xe430da){return _0x416a63>_0xe430da;},'hocFH':function(_0x197829,_0x4cccac){return _0x197829*_0x4cccac;}},_0x127c35=document[_0x508c43(0x303)](_0x508c43(0x270)),_0x231223=_0x127c35[_0x508c43(0x2cd)],_0x655e0f=_0x127c35[_0x508c43(0x1a8)],_0x5db373=_0x1f7d12[_0x508c43(0x27b)](0x1a4,0x2bc),_0x124293=_0x231223/_0x655e0f;let _0x5e17c1,_0x396aeb;_0x1f7d12[_0x508c43(0x25f)](_0x124293,_0x5db373)?(_0x396aeb=_0x655e0f,_0x5e17c1=_0x1f7d12[_0x508c43(0x311)](_0x396aeb,_0x5db373)):(_0x5e17c1=_0x231223,_0x396aeb=_0x5e17c1/_0x5db373),canvas['width']=Math[_0x508c43(0x2dc)](_0x5e17c1),canvas[_0x508c43(0x276)]=Math[_0x508c43(0x2dc)](_0x396aeb),canvas['style'][_0x508c43(0x307)]=_0x5e17c1+'px',canvas[_0x508c43(0x218)][_0x508c43(0x276)]=_0x396aeb+'px';}function drawBoard(){const _0x35c2de=a0_0x306675,_0x32f736={'UaWNs':function(_0x127e82,_0x2a07cd){return _0x127e82*_0x2a07cd;},'YIADb':function(_0x3f7810,_0x4d2045){return _0x3f7810+_0x4d2045;},'rbzQy':function(_0x45f8ac,_0x344d29){return _0x45f8ac+_0x344d29;},'FAKxw':function(_0x86257,_0x2a4d93){return _0x86257-_0x2a4d93;},'Zeyqf':'#fff','GEBen':function(_0x5b8a47,_0x1b9e5c){return _0x5b8a47+_0x1b9e5c;},'QllrJ':function(_0x2b1210,_0x562e9c){return _0x2b1210-_0x562e9c;},'mfdpW':'middle','DwohW':function(_0x310d1c,_0x24c1fb){return _0x310d1c/_0x24c1fb;},'AUmoq':function(_0x4bc77b,_0x18e53a){return _0x4bc77b/_0x18e53a;},'roEZq':function(_0x271e23,_0x1afa8a){return _0x271e23/_0x1afa8a;},'sFhMW':'#222','GKNjF':function(_0x4dacc1,_0x4f19d4){return _0x4dacc1<_0x4f19d4;},'geYoS':function(_0x1d8b45,_0x443335){return _0x1d8b45<_0x443335;},'soGrL':_0x35c2de(0x2b5),'XkobS':function(_0x2fcbb3,_0x22db9f){return _0x2fcbb3+_0x22db9f;},'zLtWD':function(_0x3ed603,_0x5afbeb){return _0x3ed603+_0x5afbeb;},'iqIvk':function(_0x3a1936,_0x39cbdd){return _0x3a1936-_0x39cbdd;},'xBuaU':_0x35c2de(0x288),'iDLjw':'center','LxfSv':_0x35c2de(0x294)},_0xc1b201=canvas[_0x35c2de(0x307)],_0x3856ef=canvas[_0x35c2de(0x276)];ctx[_0x35c2de(0x310)](0x0,0x0,_0xc1b201,_0x3856ef);const _0x2fd184=_0x32f736[_0x35c2de(0x242)](_0xc1b201,0x5),_0x4a42b4=_0x32f736[_0x35c2de(0x240)](_0x3856ef,MAX_ROWS);ctx[_0x35c2de(0x262)](),ctx[_0x35c2de(0x289)]=_0x32f736[_0x35c2de(0x1ec)],ctx[_0x35c2de(0x23e)]=0x1;for(let _0x2b4cb8=0x0;_0x2b4cb8<0x5;_0x2b4cb8++){ctx[_0x35c2de(0x1b0)](_0x32f736[_0x35c2de(0x2e4)](_0x2b4cb8,_0x2fd184),0x0,_0x2fd184,_0x3856ef);}ctx[_0x35c2de(0x29c)]();for(let _0x17a94f=0x0;_0x32f736[_0x35c2de(0x2a7)](_0x17a94f,0x5);_0x17a94f++){const _0x13c20c=gameState[_0x35c2de(0x193)][_0x17a94f];for(let _0x3d6082=0x0;_0x32f736[_0x35c2de(0x22c)](_0x3d6082,_0x13c20c['length']);_0x3d6082++){const _0x2f397e=_0x13c20c[_0x3d6082],_0x4983f2=_0x32f736[_0x35c2de(0x19e)](MAX_ROWS-0x1,_0x3d6082),_0x38c279=TONES['find'](_0x218763=>_0x218763['tone']===_0x2f397e[_0x35c2de(0x250)]),_0x454436=_0x38c279?_0x38c279[_0x35c2de(0x2a0)]:_0x32f736[_0x35c2de(0x2e8)],_0x4e7c31=_0x32f736['UaWNs'](_0x17a94f,_0x2fd184),_0x51683c=_0x4983f2*_0x4a42b4;ctx['fillStyle']=_0x454436,ctx[_0x35c2de(0x1cc)](_0x32f736[_0x35c2de(0x256)](_0x4e7c31,0x1),_0x32f736['zLtWD'](_0x51683c,0x1),_0x32f736[_0x35c2de(0x19e)](_0x2fd184,0x2),_0x32f736['iqIvk'](_0x4a42b4,0x2));if(_0x2f397e['char']){const _0x4e093b=_0x32f736[_0x35c2de(0x26d)][_0x35c2de(0x30a)]('|');let _0x5218c6=0x0;while(!![]){switch(_0x4e093b[_0x5218c6++]){case'0':ctx['textBaseline']=_0x32f736['mfdpW'];continue;case'1':ctx[_0x35c2de(0x23a)](_0x2f397e[_0x35c2de(0x20c)],_0x32f736[_0x35c2de(0x213)](_0x4e7c31,_0x2fd184/0x2),_0x32f736[_0x35c2de(0x1c8)](_0x51683c,_0x32f736[_0x35c2de(0x240)](_0x4a42b4,0x2)));continue;case'2':ctx[_0x35c2de(0x1af)]=_0x32f736[_0x35c2de(0x1b3)];continue;case'3':ctx['font']=_0x35c2de(0x2d1)+Math[_0x35c2de(0x2dc)](_0x32f736[_0x35c2de(0x2e4)](_0x4a42b4,0.5))+_0x35c2de(0x1dd);continue;case'4':ctx[_0x35c2de(0x2ca)]=_0x32f736[_0x35c2de(0x1e6)];continue;}break;}}}}gameState[_0x35c2de(0x1e9)][_0x35c2de(0x201)](_0x39441b=>{const _0x5e25f8=_0x35c2de,_0xea6511=_0x32f736[_0x5e25f8(0x2e4)](_0x39441b[_0x5e25f8(0x1a0)],_0x2fd184),_0x4e69fc=_0x2fd184,_0x20335e=_0x4a42b4;ctx[_0x5e25f8(0x2ca)]=FALLING_COLOR,ctx[_0x5e25f8(0x1cc)](_0x32f736[_0x5e25f8(0x2f2)](_0xea6511,0x1),_0x32f736[_0x5e25f8(0x213)](_0x39441b['y'],0x1),_0x32f736[_0x5e25f8(0x19e)](_0x4e69fc,0x2),_0x20335e-0x2),ctx['strokeStyle']=_0x32f736[_0x5e25f8(0x210)],ctx[_0x5e25f8(0x23e)]=0x1,ctx['strokeRect'](_0x32f736['GEBen'](_0xea6511,0x1),_0x32f736[_0x5e25f8(0x1c8)](_0x39441b['y'],0x1),_0x32f736[_0x5e25f8(0x1ed)](_0x4e69fc,0x2),_0x20335e-0x2),ctx[_0x5e25f8(0x2ca)]=FALLING_TEXT_COLOR,ctx['font']=Math[_0x5e25f8(0x2dc)](_0x32f736[_0x5e25f8(0x2e4)](_0x20335e,0.5))+_0x5e25f8(0x1dd),ctx[_0x5e25f8(0x1af)]=_0x5e25f8(0x28a),ctx['textBaseline']=_0x32f736[_0x5e25f8(0x2f1)],ctx[_0x5e25f8(0x23a)](_0x39441b[_0x5e25f8(0x20c)],_0x32f736[_0x5e25f8(0x213)](_0xea6511,_0x4e69fc/0x2),_0x32f736[_0x5e25f8(0x1c8)](_0x39441b['y'],_0x32f736[_0x5e25f8(0x2cf)](_0x20335e,0x2)));});}function animate(_0x2029d8){const _0x584132=a0_0x306675,_0x4ec759={'TIRYo':function(_0x4ac126,_0xf4f1a){return _0x4ac126*_0xf4f1a;},'BTlBG':function(_0x5c89d5,_0x25eec0){return _0x5c89d5-_0x25eec0;},'VHAsy':function(_0x1dc518,_0x42805f){return _0x1dc518==_0x42805f;},'dXuhT':function(_0x16265e,_0x509204){return _0x16265e/_0x509204;},'Zndbi':function(_0x1d13c4){return _0x1d13c4();},'NRgnG':function(_0x23ab9a,_0x49cec9){return _0x23ab9a(_0x49cec9);}};if(gameState[_0x584132(0x22d)]||gameState[_0x584132(0x2d2)]){drawBoard(),requestAnimationFrame(animate);return;}_0x4ec759[_0x584132(0x1d2)](gameState['lastFrameTime'],null)&&(gameState[_0x584132(0x261)]=_0x2029d8);const _0x1c8cc6=(_0x2029d8-gameState[_0x584132(0x261)])/0x3e8;gameState[_0x584132(0x261)]=_0x2029d8;const _0x28354c=_0x4ec759['dXuhT'](canvas[_0x584132(0x276)],MAX_ROWS),_0x412ca6=[],_0x416a90=[];gameState['fallingBlocks'][_0x584132(0x201)](_0x5e46ec=>{const _0x4b8890=_0x584132,_0x240885=_0x4ec759['TIRYo'](_0x4ec759[_0x4b8890(0x2f8)](MAX_ROWS,0x1)-_0x5e46ec[_0x4b8890(0x1d6)],_0x28354c);_0x5e46ec['y']+=FALL_SPEED*_0x1c8cc6,_0x5e46ec['y']>=_0x240885?(_0x5e46ec['y']=_0x240885,_0x416a90[_0x4b8890(0x2a6)](_0x5e46ec)):_0x412ca6[_0x4b8890(0x2a6)](_0x5e46ec);}),gameState[_0x584132(0x1e9)]=_0x412ca6,_0x416a90['forEach'](_0x3ef46e=>{finalizeLanding(_0x3ef46e);}),_0x4ec759[_0x584132(0x279)](drawBoard),_0x4ec759['NRgnG'](requestAnimationFrame,animate);}function loadRecords(){try{return JSON['parse'](localStorage['getItem'](STORAGE_KEY))||{};}catch{return{};}}function saveRecords(_0x8aff2b){const _0x438baf=a0_0x306675;try{localStorage[_0x438baf(0x215)](STORAGE_KEY,JSON[_0x438baf(0x1de)](_0x8aff2b));}catch{}}function a0_0x28de(_0x322dec,_0x3d4034){_0x322dec=_0x322dec-0x193;const _0x5168fb=a0_0x5168();let _0x28dea8=_0x5168fb[_0x322dec];return _0x28dea8;}function addRecord(_0x10641f,_0x5c661b,_0x2988ad,_0x4e8268){const _0x5789ce=a0_0x306675,_0x1dc03f={'ZbGZj':function(_0x210073,_0x30d549){return _0x210073!==_0x30d549;},'bSxdk':function(_0x193759,_0xf788ba){return _0x193759-_0xf788ba;},'Cfyip':function(_0xcef63a){return _0xcef63a();},'eUbnS':function(_0x1a4f1e,_0x4d9816){return _0x1a4f1e(_0x4d9816);}},_0x315d83=_0x1dc03f[_0x5789ce(0x2c1)](loadRecords);if(!_0x315d83[_0x10641f])_0x315d83[_0x10641f]=[];_0x315d83[_0x10641f][_0x5789ce(0x2a6)]({'name':_0x5c661b,'score':_0x2988ad,'time':_0x4e8268,'date':new Date()['toISOString']()}),_0x315d83[_0x10641f][_0x5789ce(0x228)]((_0x40ef8d,_0x1fa9b0)=>{const _0x4ab410=_0x5789ce;if(_0x1dc03f[_0x4ab410(0x239)](_0x1fa9b0[_0x4ab410(0x28c)],_0x40ef8d[_0x4ab410(0x28c)]))return _0x1dc03f[_0x4ab410(0x1ff)](_0x1fa9b0[_0x4ab410(0x28c)],_0x40ef8d[_0x4ab410(0x28c)]);return _0x1dc03f[_0x4ab410(0x1ff)](_0x40ef8d[_0x4ab410(0x277)],_0x1fa9b0['time']);}),_0x315d83[_0x10641f]=_0x315d83[_0x10641f][_0x5789ce(0x196)](0x0,0xa),_0x1dc03f[_0x5789ce(0x225)](saveRecords,_0x315d83);}function renderRecords(){const _0x5c98e5=a0_0x306675,_0x611d89={'rlQdA':function(_0x53158c,_0x4c20bd){return _0x53158c+_0x4c20bd;},'zrYAx':function(_0x1b339b){return _0x1b339b();}},_0xde3f54=_0x611d89[_0x5c98e5(0x1d8)](loadRecords),_0x57277e=gameState['currentDeckId'],_0x1479f7=_0x57277e&&_0xde3f54[_0x57277e]?_0xde3f54[_0x57277e]:[];recordsListEl[_0x5c98e5(0x21e)]='',_0x1479f7[_0x5c98e5(0x201)]((_0x18ce3e,_0x2ecd5b)=>{const _0x309877=_0x5c98e5,_0x4ba736=document[_0x309877(0x264)]('li');_0x4ba736[_0x309877(0x1b2)]=_0x611d89[_0x309877(0x27a)](_0x2ecd5b,0x1)+'.\x20'+(_0x18ce3e[_0x309877(0x2fb)]||'Player')+_0x309877(0x268)+_0x18ce3e[_0x309877(0x28c)]+_0x309877(0x1b7)+_0x18ce3e[_0x309877(0x277)]['toFixed'](0x1)+'s',recordsListEl[_0x309877(0x204)](_0x4ba736);});}saveResultBtn[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),()=>{const _0x414581=a0_0x306675,_0xf98b56={'PzLXe':_0x414581(0x1da),'XRPJc':_0x414581(0x286),'zMWSF':function(_0x14351d){return _0x14351d();}},_0x94cae4=playerNameInput[_0x414581(0x30b)][_0x414581(0x1bb)]()||_0xf98b56[_0x414581(0x26c)];addRecord(gameState['currentDeckId'],_0x94cae4,gameState[_0x414581(0x28c)],gameState[_0x414581(0x2a3)]||0x0),resultModal[_0x414581(0x218)][_0x414581(0x2c4)]=_0xf98b56['XRPJc'],_0xf98b56[_0x414581(0x22b)](renderRecords);}),closeResultBtn[a0_0x306675(0x1a2)]('click',()=>{const _0x14b53f=a0_0x306675,_0xc56bd6={'wvIZQ':_0x14b53f(0x286)};resultModal[_0x14b53f(0x218)][_0x14b53f(0x2c4)]=_0xc56bd6['wvIZQ'];});function beginRun(){const _0x1d0e1d=a0_0x306675,_0x1704e5={'tjZrf':_0x1d0e1d(0x222),'esmiD':_0x1d0e1d(0x286),'CnmTV':function(_0x4fbca9){return _0x4fbca9();},'XlIRX':function(_0x1487c7){return _0x1487c7();},'Wefau':function(_0x544941){return _0x544941();},'UGPGH':function(_0x368216,_0x29eea9){return _0x368216(_0x29eea9);}},_0x2f98e7=_0x1704e5['tjZrf'][_0x1d0e1d(0x30a)]('|');let _0x47a9d1=0x0;while(!![]){switch(_0x2f98e7[_0x47a9d1++]){case'0':resultModal['style'][_0x1d0e1d(0x2c4)]=_0x1d0e1d(0x286);continue;case'1':welcomePanel[_0x1d0e1d(0x218)][_0x1d0e1d(0x2c4)]=_0x1704e5['esmiD'];continue;case'2':_0x1704e5[_0x1d0e1d(0x229)](updateSetupToggleLabel);continue;case'3':_0x1704e5[_0x1d0e1d(0x22f)](renderRecords);continue;case'4':pauseBtn[_0x1d0e1d(0x2a5)]=![];continue;case'5':_0x1704e5[_0x1d0e1d(0x2a9)](nextPhrase);continue;case'6':if(!gameState[_0x1d0e1d(0x300)]||!gameState[_0x1d0e1d(0x2de)])return;continue;case'7':_0x1704e5['Wefau'](startTimer);continue;case'8':headerRestartBtn[_0x1d0e1d(0x2a5)]=![];continue;case'9':_0x1704e5[_0x1d0e1d(0x2a9)](resetGameStateForCurrentDeck);continue;case'10':_0x1704e5[_0x1d0e1d(0x2fd)](setPauseState,![]);continue;case'11':resizeCanvas();continue;}break;}}startBtn[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),beginRun),restartBtn[a0_0x306675(0x1a2)](a0_0x306675(0x1d3),beginRun),headerRestartBtn['addEventListener']('click',beginRun),levelSelect['addEventListener'](a0_0x306675(0x25a),_0x36a16d=>{const _0x56944d=a0_0x306675,_0x43b617={'hysDx':function(_0x36ba7b,_0xfb2c8a){return _0x36ba7b(_0xfb2c8a);},'YraGA':function(_0x1fa4f6){return _0x1fa4f6();}};gameState[_0x56944d(0x300)]=_0x36a16d[_0x56944d(0x265)][_0x56944d(0x30b)],_0x43b617['hysDx'](populateDeckSelectForCategory,_0x36a16d['target'][_0x56944d(0x30b)]),_0x43b617[_0x56944d(0x236)](renderRecords);}),deckSelect[a0_0x306675(0x1a2)](a0_0x306675(0x25a),_0x15b3a0=>{const _0x2167af=a0_0x306675,_0x4568d6={'TGtox':function(_0x38a597){return _0x38a597();}};gameState[_0x2167af(0x2de)]=_0x15b3a0[_0x2167af(0x265)][_0x2167af(0x30b)],_0x4568d6[_0x2167af(0x287)](renderRecords);}),window[a0_0x306675(0x1a2)](a0_0x306675(0x2f4),()=>{const _0x298930=a0_0x306675,_0x1b6f13={'ROpBU':function(_0x41ea9a){return _0x41ea9a();}};resizeCanvas(),_0x1b6f13[_0x298930(0x29d)](drawBoard);}),window[a0_0x306675(0x1a2)](a0_0x306675(0x211),_0x121261=>{const _0x59d7eb=a0_0x306675,_0x42bc86={'joHyW':function(_0x3dcfae,_0x47ffa6,_0x214426){return _0x3dcfae(_0x47ffa6,_0x214426);},'nfzry':function(_0x11ee40,_0x58865d){return _0x11ee40<=_0x58865d;},'aTJIg':function(_0x2aed94,_0x26546b){return _0x2aed94(_0x26546b);}},_0x1e0291=_0x42bc86[_0x59d7eb(0x2c0)](parseInt,_0x121261[_0x59d7eb(0x237)],0xa);if(_0x1e0291>=0x1&&_0x42bc86['nfzry'](_0x1e0291,0x5))_0x42bc86[_0x59d7eb(0x30d)](handleToneInput,_0x1e0291);}),async function init(){const _0x31d3f6=a0_0x306675,_0x4ceedd={'QslVn':function(_0x10a2a5){return _0x10a2a5();},'QdhYq':function(_0x4c2f3e,_0x5e31a1){return _0x4c2f3e(_0x5e31a1);},'opwiB':'info','wCewG':function(_0x32946e,_0x2df973){return _0x32946e+_0x2df973;},'oPzcX':_0x31d3f6(0x1c2)};try{const _0xb78275=_0x31d3f6(0x2ae)[_0x31d3f6(0x30a)]('|');let _0x471487=0x0;while(!![]){switch(_0xb78275[_0x471487++]){case'0':_0x4ceedd[_0x31d3f6(0x2b0)](updateLanguageUI);continue;case'1':_0x4ceedd[_0x31d3f6(0x2b0)](resizeCanvas);continue;case'2':preloadSfx();continue;case'3':_0x4ceedd[_0x31d3f6(0x2af)](requestAnimationFrame,animate);continue;case'4':await _0x4ceedd[_0x31d3f6(0x2b0)](loadAllDatasets);continue;}break;}}catch(_0x1c66c7){console[_0x31d3f6(0x25c)](_0x1c66c7),document['getElementById'](_0x4ceedd[_0x31d3f6(0x25e)])['textContent']=_0x4ceedd['wCewG'](_0x4ceedd['oPzcX'],_0x1c66c7[_0x31d3f6(0x1b4)]);}}();