const a0_0x10deac=a0_0x20d1;(function(_0x4ccbfc,_0x3d3555){const _0xcd0085=a0_0x20d1,_0xa1fd29=_0x4ccbfc();while(!![]){try{const _0x4b3808=parseInt(_0xcd0085(0x1ef))/0x1*(-parseInt(_0xcd0085(0x29a))/0x2)+parseInt(_0xcd0085(0x2db))/0x3*(-parseInt(_0xcd0085(0x292))/0x4)+parseInt(_0xcd0085(0x2a7))/0x5+-parseInt(_0xcd0085(0x20d))/0x6+parseInt(_0xcd0085(0x24c))/0x7+parseInt(_0xcd0085(0x2b8))/0x8+parseInt(_0xcd0085(0x207))/0x9*(-parseInt(_0xcd0085(0x250))/0xa);if(_0x4b3808===_0x3d3555)break;else _0xa1fd29['push'](_0xa1fd29['shift']());}catch(_0x274509){_0xa1fd29['push'](_0xa1fd29['shift']());}}}(a0_0xc7fc,0x23935));const TONES=[{'tone':0x1,'key':'1','colIndex':0x0,'color':'#ff4d4f','symbol':'¯','zh':'一声','en':a0_0x10deac(0x32b)},{'tone':0x2,'key':'2','colIndex':0x1,'color':'#40a9ff','symbol':'ˊ','zh':'二声','en':a0_0x10deac(0x266)},{'tone':0x3,'key':'3','colIndex':0x2,'color':a0_0x10deac(0x213),'symbol':'ˇ','zh':'三声','en':a0_0x10deac(0x2d2)},{'tone':0x4,'key':'4','colIndex':0x3,'color':a0_0x10deac(0x31b),'symbol':'ˋ','zh':'四声','en':a0_0x10deac(0x1ed)},{'tone':0x5,'key':'5','colIndex':0x4,'color':a0_0x10deac(0x324),'symbol':'','zh':'轻声','en':'neutral'}],COL_TONE_BY_INDEX=[0x1,0x2,0x3,0x4,0x5],MAX_ROWS=0xc,CHAR_TIMEOUT_MS=0x0,FALL_SPEED=0x2d,FALLING_COLOR=a0_0x10deac(0x30a),FALLING_TEXT_COLOR='#f5f5f5',TEXTS={'zh':{'title':a0_0x10deac(0x2bd),'welcome':a0_0x10deac(0x32e),'enter':a0_0x10deac(0x242),'levelLabel':a0_0x10deac(0x325),'deckLabel':'选择词库：','start':'开始游戏','showSetup':a0_0x10deac(0x224),'hideSetup':a0_0x10deac(0x1d8),'score':a0_0x10deac(0x2d4),'combo':'连击：','time':'用时：','ready':'选择一个等级和词库，然后点击“开始游戏”。\x0a键盘\x201–5\x20输入声调。\x0a按错会在对应声调列生成彩色方块。\x0a如果放着不管，未输入的字会让底部整体升高几层作为惩罚。','gameOver':'游戏结束！','gameClear':a0_0x10deac(0x2d3),'current':a0_0x10deac(0x1cf),'langBtn':'English','recordsTitle':'当前词库成绩','modalTitle':a0_0x10deac(0x283),'nameLabel':a0_0x10deac(0x31f),'save':a0_0x10deac(0x2c9),'close':'关闭'},'en':{'title':'Tone\x20Blocks','welcome':a0_0x10deac(0x2e9),'enter':'Enter\x20Game','levelLabel':a0_0x10deac(0x27c),'deckLabel':a0_0x10deac(0x32f),'start':a0_0x10deac(0x320),'showSetup':a0_0x10deac(0x318),'hideSetup':a0_0x10deac(0x32a),'score':'Score:','combo':a0_0x10deac(0x20f),'time':a0_0x10deac(0x1e3),'ready':'Choose\x20a\x20level\x20and\x20a\x20deck,\x20then\x20click\x20\x22Start\x22.\x0aUse\x20keys\x201–5\x20to\x20input\x20tones.\x0aWrong\x20input\x20creates\x20a\x20coloured\x20block\x20in\x20that\x20tone\x20column.\x0aIf\x20you\x20ignore\x20a\x20drop,\x20the\x20playfield\x20will\x20rise\x20a\x20few\x20rows\x20as\x20a\x20penalty\x20instead\x20of\x20piling\x20random\x20blocks.','gameOver':a0_0x10deac(0x247),'gameClear':a0_0x10deac(0x29f),'current':a0_0x10deac(0x236),'langBtn':'中文','recordsTitle':a0_0x10deac(0x268),'modalTitle':a0_0x10deac(0x1d7),'nameLabel':a0_0x10deac(0x25e),'save':a0_0x10deac(0x21a),'close':'Close'}},STORAGE_KEY=a0_0x10deac(0x203),canvas=document['getElementById'](a0_0x10deac(0x210)),ctx=canvas[a0_0x10deac(0x2a8)]('2d'),welcomePanel=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x2a0)),welcomeText=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x1e1)),setupToggle=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x1f7)),levelSelect=document['getElementById'](a0_0x10deac(0x2c3)),deckSelect=document['getElementById'](a0_0x10deac(0x2df)),startBtn=document[a0_0x10deac(0x1fa)]('start-btn'),scoreSpan=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x25a)),comboSpan=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x1db)),timeSpan=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x30f)),statusLabel=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x2f0)),currentTextLabel=document['getElementById']('current-text-label'),infoDiv=document[a0_0x10deac(0x1fa)]('info'),titleEl=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x248)),levelLabelEl=document['getElementById'](a0_0x10deac(0x25d)),deckLabelEl=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x1dc)),scoreLabelEl=document[a0_0x10deac(0x1fa)]('score-label'),comboLabelEl=document[a0_0x10deac(0x1fa)]('combo-label'),timerLabelEl=document[a0_0x10deac(0x1da)](a0_0x10deac(0x317)),langBtn=document[a0_0x10deac(0x1fa)]('lang-btn'),toneButtonsDiv=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x1f9)),recordsTitleEl=document['getElementById'](a0_0x10deac(0x2e0)),recordsListEl=document['getElementById']('records-list'),resultModal=document['getElementById'](a0_0x10deac(0x2f1)),modalTitleEl=document['getElementById'](a0_0x10deac(0x2de)),modalSummaryEl=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x2cf)),nameLabelEl=document[a0_0x10deac(0x1fa)]('name-label'),playerNameInput=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x21b)),saveResultBtn=document[a0_0x10deac(0x1fa)](a0_0x10deac(0x22b)),closeResultBtn=document['getElementById']('close-result-btn');let currentLang='zh';const gameState={'categories':new Map(),'decksById':new Map(),'currentCategory':null,'currentDeckId':null,'phraseQueue':[],'currentPhrase':null,'currentCharIndex':0x0,'awaitingInput':![],'gameOver':![],'score':0x0,'combo':0x0,'board':[[],[],[],[],[]],'fallingBlocks':[],'currentPhraseId':null,'audioObj':null,'startTime':null,'timerHandle':null,'lastElapsedSec':0x0,'charTimeoutHandle':null,'lastNoInputColumnIdx':null,'lastFrameTime':null};function buildToneButtons(){const _0x17de28=a0_0x10deac,_0x32da24={'RGkxd':_0x17de28(0x23f),'DUvmE':function(_0x166476,_0x70ee7c){return _0x166476(_0x70ee7c);},'rqlay':function(_0x30af59,_0x2199aa){return _0x30af59===_0x2199aa;},'sXbRl':_0x17de28(0x2ef),'hZMRa':_0x17de28(0x24b)};toneButtonsDiv[_0x17de28(0x1e6)]='',TONES['forEach'](_0x348695=>{const _0x3bc9bf=_0x17de28,_0x3be7c7=document[_0x3bc9bf(0x221)](_0x3bc9bf(0x1fb));_0x3be7c7[_0x3bc9bf(0x32c)]=_0x32da24['RGkxd'],_0x3be7c7[_0x3bc9bf(0x23e)][_0x3bc9bf(0x2ba)]=_0x348695['color'],_0x3be7c7[_0x3bc9bf(0x263)][_0x3bc9bf(0x237)]=_0x32da24[_0x3bc9bf(0x26c)](String,_0x348695[_0x3bc9bf(0x237)]);const _0x158a52=_0x32da24['rqlay'](_0x348695['tone'],0x5)?_0x32da24['sXbRl']:_0x348695[_0x3bc9bf(0x30e)]||_0x348695[_0x3bc9bf(0x237)];_0x3be7c7['innerHTML']=_0x3bc9bf(0x29e)+_0x158a52+_0x3bc9bf(0x22f)+(_0x32da24[_0x3bc9bf(0x322)](currentLang,'zh')?_0x348695['zh']:_0x348695['en'])+_0x3bc9bf(0x21d),_0x3be7c7[_0x3bc9bf(0x2ce)](_0x32da24[_0x3bc9bf(0x2b4)],()=>handleToneInput(_0x348695[_0x3bc9bf(0x237)])),toneButtonsDiv[_0x3bc9bf(0x1d3)](_0x3be7c7);});}function updateSetupToggleLabel(){const _0x459080=a0_0x10deac,_0x191faa={'oSvZS':_0x459080(0x2d9)},_0x5450d3=TEXTS[currentLang],_0x5629e1=welcomePanel[_0x459080(0x23e)]['display']===_0x191faa[_0x459080(0x2ca)];setupToggle['textContent']=_0x5629e1?_0x5450d3['showSetup']:_0x5450d3[_0x459080(0x300)];}function updateLanguageUI(){const _0x373b19=a0_0x10deac,_0x591947={'JFgEY':_0x373b19(0x2fb),'hyzPh':_0x373b19(0x315),'TDyOn':function(_0x54e40c){return _0x54e40c();}},_0x4538b6=TEXTS[currentLang];titleEl[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x248)],welcomeText[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x2e1)],levelLabelEl[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x261)],deckLabelEl[_0x373b19(0x249)]=_0x4538b6['deckLabel'],startBtn[_0x373b19(0x249)]=_0x4538b6['start'],document[_0x373b19(0x1fa)](_0x591947[_0x373b19(0x2bc)])['firstChild'][_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x25a)],document[_0x373b19(0x1fa)](_0x591947[_0x373b19(0x288)])[_0x373b19(0x1fc)][_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x1db)],timerLabelEl[_0x373b19(0x1fc)][_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x30f)],langBtn[_0x373b19(0x249)]=_0x4538b6['langBtn'],recordsTitleEl[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x2ec)],modalTitleEl[_0x373b19(0x249)]=_0x4538b6['modalTitle'],nameLabelEl[_0x373b19(0x249)]=_0x4538b6['nameLabel'],saveResultBtn[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x2dd)],closeResultBtn[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x304)],infoDiv[_0x373b19(0x249)]=_0x4538b6[_0x373b19(0x1d5)],_0x591947[_0x373b19(0x296)](buildToneButtons),renderRecords(),_0x591947[_0x373b19(0x296)](updateSetupToggleLabel);}langBtn[a0_0x10deac(0x2ce)](a0_0x10deac(0x24b),()=>{const _0x590c2f=a0_0x10deac,_0x1356d6={'JKqQF':function(_0x343897){return _0x343897();}};currentLang=currentLang==='zh'?'en':'zh',_0x1356d6[_0x590c2f(0x22a)](updateLanguageUI);}),setupToggle['addEventListener']('click',()=>{const _0x369f17=a0_0x10deac,_0x4fbec8={'Zvjvw':function(_0x5f2cda,_0x565a86){return _0x5f2cda===_0x565a86;},'phZAx':'none','yLWtP':_0x369f17(0x2e8)},_0xa664d7=_0x4fbec8[_0x369f17(0x2c0)](welcomePanel['style']['display'],_0x4fbec8[_0x369f17(0x218)]);welcomePanel[_0x369f17(0x23e)][_0x369f17(0x24e)]=_0xa664d7?_0x4fbec8['yLWtP']:_0x4fbec8[_0x369f17(0x218)],updateSetupToggleLabel();});async function loadJSON(_0x4a6e67){const _0x4198fd=a0_0x10deac,_0x3b957a={'lwkUF':function(_0x4753b8,_0x2e6953){return _0x4753b8(_0x2e6953);},'LgiBY':function(_0x659fd9,_0x2a27d8){return _0x659fd9+_0x2a27d8;}},_0x2cc8ee=await _0x3b957a['lwkUF'](fetch,_0x4a6e67);if(!_0x2cc8ee['ok'])throw new Error(_0x3b957a[_0x4198fd(0x26a)](_0x4198fd(0x289)+_0x4a6e67,':\x20')+_0x2cc8ee[_0x4198fd(0x21c)]);return _0x2cc8ee['json']();}function extractToneSequenceFromId(_0x4baa46){const _0x1c83e3=a0_0x10deac,_0x11fc42=_0x4baa46[_0x1c83e3(0x256)]('_'),_0x59c4a5=[];for(const _0xc1ec8d of _0x11fc42){const _0x1b26de=_0xc1ec8d[_0x1c83e3(0x30c)](/([1-5])$/);if(_0x1b26de)_0x59c4a5['push'](parseInt(_0x1b26de[0x1],0xa));else _0x59c4a5[_0x1c83e3(0x23c)](0x5);}return _0x59c4a5;}function buildCharsForEntry(_0x25cf74){const _0x2c10fb=a0_0x10deac,_0x396d2e={'OGQXR':function(_0x54305c,_0x3b4db0){return _0x54305c(_0x3b4db0);},'qjfpU':function(_0x1a7501,_0xa55084){return _0x1a7501<_0xa55084;}},_0x17739b=_0x25cf74[_0x2c10fb(0x2a1)],_0x343e17=_0x396d2e[_0x2c10fb(0x2c4)](extractToneSequenceFromId,_0x25cf74['id']),_0x20dcad=Math[_0x2c10fb(0x208)](_0x17739b[_0x2c10fb(0x202)],_0x343e17['length']),_0x3f1404=[];for(let _0x16d244=0x0;_0x396d2e['qjfpU'](_0x16d244,_0x20dcad);_0x16d244++){_0x3f1404[_0x2c10fb(0x23c)]({'char':_0x17739b[_0x16d244],'tone':_0x343e17[_0x16d244]});}return _0x3f1404;}function deriveAudioUrl(_0x369d27,_0x20de96){const _0x8bf3c7=a0_0x10deac,_0x51ecd5={'nZhxL':function(_0xde695e,_0x3fe006){return _0xde695e+_0x3fe006;}},_0x5639d0=_0x369d27[_0x8bf3c7(0x302)](/\.json$/i,''),_0x57ba77=_0x20de96[_0x8bf3c7(0x256)](/[\\/]/)[_0x8bf3c7(0x2a9)]();return _0x51ecd5[_0x8bf3c7(0x1fd)](_0x51ecd5[_0x8bf3c7(0x1fd)](_0x5639d0,'/'),_0x57ba77);}async function loadAllDatasets(){const _0xa83487=a0_0x10deac,_0xf65d4e={'rDhvr':function(_0x28e314,_0x5814d7,_0x4bfe2c){return _0x28e314(_0x5814d7,_0x4bfe2c);},'VPZMw':'manifest.json','WjCcW':function(_0x7bffe2,_0x5e4684){return _0x7bffe2+_0x5e4684;},'IMvCk':_0xa83487(0x2bb),'TMHrK':function(_0x33fc4a,_0x23ac65){return _0x33fc4a>_0x23ac65;},'jgFhy':_0xa83487(0x2b6),'rbhQO':function(_0x13b86f,_0x24df2c){return _0x13b86f+_0x24df2c;},'ICicF':function(_0x4bf630,_0x5ebe6d){return _0x4bf630+_0x5ebe6d;},'DFkWM':function(_0x364656,_0x18ec54){return _0x364656+_0x18ec54;}},_0x581dc0=await loadJSON(_0xf65d4e[_0xa83487(0x20e)]),_0xd8a417=_0x581dc0[_0xa83487(0x297)]||[],_0x5b717e=new Map(),_0x547c1c=new Map(),_0x2519ba=[];for(const _0x26ed89 of _0xd8a417){try{const _0x7df474=_0x26ed89['split']('/')['pop'](),_0x1fd954=_0x7df474[_0xa83487(0x30c)](/^([a-zA-Z]+)(\d+)/);if(!_0x1fd954)continue;const _0x5ef430=_0x1fd954[0x1],_0x962994=_0x1fd954[0x2],_0x188a18=_0x962994[0x0],_0x11c69f=_0xf65d4e['WjCcW'](_0x5ef430,_0x188a18)['toUpperCase'](),_0x202ad4=_0x7df474[_0xa83487(0x302)](/\.json$/i,''),_0x2ed08d=await loadJSON(_0x26ed89);_0x2ed08d[_0xa83487(0x2d8)](_0xb720bb=>{const _0x16ee50=_0xa83487;_0xb720bb[_0x16ee50(0x286)]=_0xf65d4e['rDhvr'](deriveAudioUrl,_0x26ed89,_0xb720bb[_0x16ee50(0x2c7)]||'');}),_0x547c1c[_0xa83487(0x212)](_0x202ad4,{'id':_0x202ad4,'category':_0x11c69f,'displayName':_0x202ad4[_0xa83487(0x1ea)](),'entries':_0x2ed08d});if(!_0x5b717e['has'](_0x11c69f))_0x5b717e['set'](_0x11c69f,[]);_0x5b717e[_0xa83487(0x313)](_0x11c69f)['push'](_0x202ad4);}catch(_0x8917be){console['warn'](_0xa83487(0x2f3),_0x26ed89,_0x8917be),_0x2519ba[_0xa83487(0x23c)](_0x26ed89);}}for(const [_0x2e17e9,_0x1b8e0b]of _0x5b717e['entries']()){_0x1b8e0b[_0xa83487(0x299)]();}gameState[_0xa83487(0x281)]=_0x5b717e,gameState[_0xa83487(0x2ff)]=_0x547c1c,levelSelect['innerHTML']='';const _0x4b260d=Array[_0xa83487(0x2a4)](_0x5b717e['keys']())['sort']();for(const _0x7add62 of _0x4b260d){const _0x36e6d7=document[_0xa83487(0x221)](_0xf65d4e[_0xa83487(0x220)]);_0x36e6d7[_0xa83487(0x273)]=_0x7add62,_0x36e6d7[_0xa83487(0x249)]=_0x7add62,levelSelect[_0xa83487(0x1d3)](_0x36e6d7);}_0xf65d4e[_0xa83487(0x1fe)](_0x4b260d[_0xa83487(0x202)],0x0)&&(gameState[_0xa83487(0x2ae)]=_0x4b260d[0x0],populateDeckSelectForCategory(gameState[_0xa83487(0x2ae)]));const _0x477a3c=TEXTS[currentLang];let _0x1c6516=_0xa83487(0x307)+(_0x4b260d[_0xa83487(0x2fc)](',\x20')||_0xf65d4e[_0xa83487(0x27d)]);_0x2519ba['length']>0x0&&(_0x1c6516+=_0xf65d4e[_0xa83487(0x2c1)](_0xa83487(0x265),_0x2519ba[_0xa83487(0x2fc)]('\x0a'))),infoDiv[_0xa83487(0x249)]=_0xf65d4e[_0xa83487(0x240)](_0xf65d4e[_0xa83487(0x23d)](_0x1c6516,'\x0a\x0a'),_0x477a3c[_0xa83487(0x1d5)]);}function populateDeckSelectForCategory(_0x33f6c8){const _0x50f4ae=a0_0x10deac,_0x34261c={'igLCQ':_0x50f4ae(0x2bb)},_0x3558f0=gameState[_0x50f4ae(0x281)][_0x50f4ae(0x313)](_0x33f6c8)||[];deckSelect[_0x50f4ae(0x1e6)]='',_0x3558f0[_0x50f4ae(0x2d8)](_0xe83bc4=>{const _0x47b970=_0x50f4ae,_0x2f164f=gameState[_0x47b970(0x2ff)][_0x47b970(0x313)](_0xe83bc4);if(!_0x2f164f)return;const _0x1dd313=document[_0x47b970(0x221)](_0x34261c[_0x47b970(0x253)]);_0x1dd313[_0x47b970(0x273)]=_0x2f164f['id'],_0x1dd313[_0x47b970(0x249)]=_0x2f164f[_0x47b970(0x28c)],deckSelect[_0x47b970(0x1d3)](_0x1dd313);}),gameState['currentDeckId']=_0x3558f0[_0x50f4ae(0x202)]?_0x3558f0[0x0]:null;}function startTimer(){const _0x460626=a0_0x10deac,_0x19006c={'UrAEi':function(_0x5589c5,_0x4b4ae5){return _0x5589c5/_0x4b4ae5;}};gameState['startTime']=performance[_0x460626(0x314)](),gameState['lastElapsedSec']=0x0;if(gameState['timerHandle'])clearInterval(gameState[_0x460626(0x301)]);gameState[_0x460626(0x301)]=setInterval(()=>{const _0x4d007f=_0x460626;if(!gameState[_0x4d007f(0x293)])return;const _0x482e5a=_0x19006c['UrAEi'](performance['now']()-gameState['startTime'],0x3e8);gameState['lastElapsedSec']=_0x482e5a,timeSpan[_0x4d007f(0x249)]=_0x482e5a[_0x4d007f(0x1d0)](0x1);},0x64);}function a0_0x20d1(_0x2eaf9f,_0xa84594){_0x2eaf9f=_0x2eaf9f-0x1ce;const _0xc7fcd1=a0_0xc7fc();let _0x20d18f=_0xc7fcd1[_0x2eaf9f];return _0x20d18f;}function stopTimer(){const _0x170229=a0_0x10deac,_0x1a64f7={'MYTEw':function(_0x5bf3c2,_0x3020a8){return _0x5bf3c2(_0x3020a8);}};gameState[_0x170229(0x301)]&&(_0x1a64f7[_0x170229(0x234)](clearInterval,gameState[_0x170229(0x301)]),gameState[_0x170229(0x301)]=null);if(gameState[_0x170229(0x293)]){const _0x1d23e1=(performance[_0x170229(0x314)]()-gameState[_0x170229(0x293)])/0x3e8;gameState[_0x170229(0x232)]=_0x1d23e1,timeSpan[_0x170229(0x249)]=_0x1d23e1[_0x170229(0x1d0)](0x1);}}function scheduleCharTimeout(){const _0x5ecafd=a0_0x10deac,_0x52b215={'XOITV':function(_0xca0ac3){return _0xca0ac3();},'lNdrB':function(_0x2e9a37,_0x4a1cd2){return _0x2e9a37<=_0x4a1cd2;},'cPDGQ':function(_0x513c7e,_0x49ecfd,_0x58f1c2){return _0x513c7e(_0x49ecfd,_0x58f1c2);}};clearTimeout(gameState['charTimeoutHandle']);if(_0x52b215['lNdrB'](CHAR_TIMEOUT_MS,0x0))return;gameState[_0x5ecafd(0x21f)]=_0x52b215[_0x5ecafd(0x2f2)](setTimeout,()=>{const _0x1cfa9d=_0x5ecafd;_0x52b215[_0x1cfa9d(0x252)](handleNoInputTimeout);},CHAR_TIMEOUT_MS);}const SFX_FILES={'hit':a0_0x10deac(0x2bf),'miss':a0_0x10deac(0x287),'wrong':a0_0x10deac(0x22d)};let sfxContext=null;const sfxCache={};function playBeep(_0x26fe6e=0x370,_0x22460e=0.08){const _0x317723=a0_0x10deac,_0x442bb2={'ceZtg':_0x317723(0x1f0),'DZeQZ':function(_0x506225,_0x523841){return _0x506225+_0x523841;},'ZUEBz':_0x317723(0x2f6)};try{if(!sfxContext)sfxContext=new(window[(_0x317723(0x295))]||window['webkitAudioContext'])();const _0x5bf671=sfxContext,_0x4ab6c5=_0x5bf671[_0x317723(0x1ce)](),_0x33bbc5=_0x5bf671[_0x317723(0x2a3)]();_0x4ab6c5['type']=_0x442bb2[_0x317723(0x251)],_0x4ab6c5[_0x317723(0x223)][_0x317723(0x273)]=_0x26fe6e,_0x33bbc5[_0x317723(0x26f)][_0x317723(0x273)]=0.15,_0x4ab6c5['connect'](_0x33bbc5)['connect'](_0x5bf671['destination']);const _0x5ac259=_0x5bf671[_0x317723(0x1d4)];_0x4ab6c5[_0x317723(0x308)](_0x5ac259),_0x4ab6c5[_0x317723(0x2b7)](_0x442bb2['DZeQZ'](_0x5ac259,_0x22460e));}catch(_0x1a65e4){console['warn'](_0x442bb2[_0x317723(0x1e7)],_0x1a65e4);}}function preloadSfx(){const _0x59b131=a0_0x10deac,_0x4a2a21={'fjNyr':_0x59b131(0x2cc)};Object[_0x59b131(0x262)](SFX_FILES)[_0x59b131(0x2d8)](([_0x4f69ce,_0x5ec5aa])=>{const _0x161777=_0x59b131,_0x2a4660=new Audio(_0x5ec5aa);_0x2a4660[_0x161777(0x1dd)]=_0x4a2a21[_0x161777(0x229)],sfxCache[_0x4f69ce]=_0x2a4660;});}function playSfx(_0x201bce,_0x3a2772=0x294){const _0x5db8af=a0_0x10deac,_0x4f9b4d={'wPOto':function(_0x3f10c7,_0x30d856){return _0x3f10c7(_0x30d856);},'OAliA':_0x5db8af(0x1d2)},_0x3e5482=sfxCache[_0x201bce];if(!_0x3e5482){_0x4f9b4d[_0x5db8af(0x284)](playBeep,_0x3a2772);return;}try{const _0x3a5782=_0x3e5482[_0x5db8af(0x2d6)]();_0x3a5782[_0x5db8af(0x1d4)]=0x0,_0x3a5782['play']()[_0x5db8af(0x1f1)](()=>playBeep(_0x3a2772));}catch(_0x5d6dcd){console[_0x5db8af(0x244)](_0x4f9b4d['OAliA'],_0x5d6dcd),_0x4f9b4d['wPOto'](playBeep,_0x3a2772);}}function clearCharTimeout(){const _0x19bc64=a0_0x10deac;gameState['charTimeoutHandle']&&(clearTimeout(gameState['charTimeoutHandle']),gameState[_0x19bc64(0x21f)]=null);}function resetBoard(){const _0x3e64ec=a0_0x10deac;gameState[_0x3e64ec(0x2fe)]=[[],[],[],[],[]],gameState[_0x3e64ec(0x245)]=[],gameState[_0x3e64ec(0x235)]=null;}function resetGameStateForCurrentDeck(){const _0x5b0728=a0_0x10deac,_0x255ba5={'jMLlQ':'0.0','rcTog':function(_0x10e334){return _0x10e334();}},_0x4436d7=gameState['decksById'][_0x5b0728(0x313)](gameState['currentDeckId']);if(!_0x4436d7)return;const _0x45ecd2=_0x4436d7[_0x5b0728(0x262)]||[],_0x1dc4bb=_0x45ecd2[_0x5b0728(0x225)]()['sort'](()=>Math[_0x5b0728(0x1f3)]()-0.5);gameState[_0x5b0728(0x24f)]=_0x1dc4bb,gameState[_0x5b0728(0x279)]=null,gameState[_0x5b0728(0x1e9)]=0x0,gameState[_0x5b0728(0x28b)]=null,gameState[_0x5b0728(0x25a)]=0x0,gameState['combo']=0x0,gameState[_0x5b0728(0x1df)]=![],gameState[_0x5b0728(0x1f6)]=![],gameState[_0x5b0728(0x293)]=null,gameState['lastElapsedSec']=0x0,timeSpan[_0x5b0728(0x249)]=_0x255ba5['jMLlQ'],resetBoard(),clearCharTimeout(),_0x255ba5[_0x5b0728(0x23a)](updateScoreUI),statusLabel[_0x5b0728(0x249)]='',currentTextLabel[_0x5b0728(0x249)]='';}function updateScoreUI(){const _0x5c9284=a0_0x10deac;scoreSpan[_0x5c9284(0x249)]=gameState[_0x5c9284(0x25a)],comboSpan['textContent']=gameState[_0x5c9284(0x1db)];}function playCurrentAudio(_0x58f162){const _0x22892f=a0_0x10deac,_0x2e5a8e={'dLiiD':function(_0x51a254){return _0x51a254();},'GMsZn':_0x22892f(0x323),'vuLqB':_0x22892f(0x2cc),'SwxOo':_0x22892f(0x2f7),'oFjgy':_0x22892f(0x1f5),'MfwCE':function(_0x53dc7a,_0xce4597,_0x5d19b5){return _0x53dc7a(_0xce4597,_0x5d19b5);}};if(gameState[_0x22892f(0x277)])gameState[_0x22892f(0x277)][_0x22892f(0x305)]();if(!_0x58f162)return![];const _0x349ffe=_0x58f162[_0x22892f(0x286)]||_0x58f162[_0x22892f(0x2c7)];if(!_0x349ffe)return![];const _0x224d55=new Audio(_0x349ffe);_0x224d55['preload']=_0x2e5a8e[_0x22892f(0x1ec)],_0x224d55[_0x22892f(0x27a)]=_0x2e5a8e[_0x22892f(0x316)],_0x224d55['currentTime']=0x0,gameState[_0x22892f(0x277)]=_0x224d55;let _0x369538=![];const _0x3efe72=()=>{const _0x16e668=_0x22892f;if(_0x369538)return;_0x369538=!![],_0x2e5a8e[_0x16e668(0x2c6)](scheduleCharTimeout);};return _0x224d55[_0x22892f(0x2ce)]('play',_0x3efe72,{'once':!![]}),_0x224d55['addEventListener'](_0x2e5a8e[_0x22892f(0x2e4)],_0x3efe72,{'once':!![]}),_0x224d55['play']()['catch'](_0x52c5eb=>{const _0x535487=_0x22892f;console[_0x535487(0x244)](_0x2e5a8e['GMsZn'],_0x52c5eb),_0x2e5a8e[_0x535487(0x2c6)](_0x3efe72);}),_0x2e5a8e[_0x22892f(0x270)](setTimeout,()=>_0x3efe72(),0x12c),!![];}function spawnPhraseBlocks(_0x3e24d5){const _0x1f7ad5=a0_0x10deac,_0x2aff16={'RlNvX':function(_0x90f66d,_0x3baa02){return _0x90f66d/_0x3baa02;},'jMtXL':function(_0xfcaf11,_0x47cacb){return _0xfcaf11-_0x47cacb;},'qicVT':function(_0x54e7b8,_0x35c46d){return _0x54e7b8/_0x35c46d;},'yjeFE':function(_0x47f9c8,_0x4d881a){return _0x47f9c8/_0x4d881a;},'pOFXG':function(_0x3a9328,_0x32bae5){return _0x3a9328-_0x32bae5;},'EeGQd':function(_0x3204e,_0x57f8fd){return _0x3204e-_0x57f8fd;},'fTmMf':function(_0x1c1352,_0xafddcd){return _0x1c1352+_0xafddcd;},'YhVTz':function(_0x33dedc,_0x49ae5a){return _0x33dedc>=_0x49ae5a;},'FjAdG':function(_0x1208ea,_0x5df86b){return _0x1208ea(_0x5df86b);},'gjtrU':function(_0xc98278,_0x23e2a8){return _0xc98278+_0x23e2a8;}},_0x538b9d=_0x3e24d5[_0x1f7ad5(0x32d)],_0x446d57=Math[_0x1f7ad5(0x2b9)](_0x2aff16[_0x1f7ad5(0x2d7)](_0x538b9d[_0x1f7ad5(0x202)],0x5)),_0x138ab3=gameState[_0x1f7ad5(0x2fe)][_0x1f7ad5(0x321)](_0xdc0da4=>_0xdc0da4[_0x1f7ad5(0x202)]),_0x51907f=_0x2aff16[_0x1f7ad5(0x1f8)](-_0x446d57*_0x2aff16['qicVT'](canvas[_0x1f7ad5(0x201)],MAX_ROWS),0x14);for(let _0x270be4=0x0;_0x270be4<_0x538b9d[_0x1f7ad5(0x202)];_0x270be4++){const _0x264772=_0x270be4%0x5,_0x3cccb4=Math['floor'](_0x2aff16['yjeFE'](_0x270be4,0x5)),_0x4f43bf=_0x2aff16[_0x1f7ad5(0x2f4)](_0x2aff16[_0x1f7ad5(0x1e5)](_0x446d57,0x1),_0x3cccb4),_0x3d7c27=_0x2aff16['fTmMf'](_0x138ab3[_0x264772],_0x4f43bf);if(_0x2aff16[_0x1f7ad5(0x31d)](_0x3d7c27,MAX_ROWS)){_0x2aff16[_0x1f7ad5(0x309)](finishGame,_0x1f7ad5(0x275));return;}gameState['fallingBlocks'][_0x1f7ad5(0x23c)]({'char':_0x538b9d[_0x270be4]['char'],'trueTone':_0x538b9d[_0x270be4]['tone'],'colIdx':_0x264772,'targetRowIndex':_0x3d7c27,'y':_0x2aff16[_0x1f7ad5(0x25b)](_0x51907f,_0x3cccb4*_0x2aff16[_0x1f7ad5(0x2ea)](canvas[_0x1f7ad5(0x201)],MAX_ROWS)),'phraseId':_0x3e24d5['id'],'charIndex':_0x270be4});}}function a0_0xc7fc(){const _0x2a7626=['fillStyle','已加载等级：','start','FjAdG','#111','ONsxC','match','eKFVg','symbol','time','CfiXS','BQMIU','strokeRect','get','now','combo-label','SwxOo','#timer','Show\x20setup','AIZGx','nJjbY','#73d13d','YgUoa','YhVTz','JnPGe','请输入名字：','Start','map','rqlay','audio\x20play\x20failed','#9254de','选择等级：','Egxwt','GAYDd','upeod','qwpBU','Hide\x20setup','1st','className','chars','点击下面的按钮进入游戏，然后先选择等级，再选择词库开始练习。','Deck:','createOscillator','当前：','toFixed','target','playSfx\x20failed','appendChild','currentTime','ready','uqqIo','Result','隐藏设置','entry','querySelector','combo','deck-label','preload','px\x20sans-serif','gameOver','XwYig','welcome-text','xSOny','Time:','shift','EeGQd','innerHTML','ZUEBz','find','currentCharIndex','toUpperCase','KGTxl','vuLqB','4th','uCdWR','1LFZVSf','sine','catch','splice','random','DAVyb','error','awaitingInput','setup-toggle','jMtXL','tone-buttons','getElementById','button','firstChild','nZhxL','TMHrK','OunCo','targetRowIndex','height','length','tone_tetris_records_v2','qkPok','wrong','clear','108207rZEcLB','min','BgzFM','BZqQs','name','textAlign','873642MEqcDQ','VPZMw','Combo:','game-canvas','qSXpY','set','#fadb14','doUCc','AWeTh','change','strokeStyle','phZAx','BeCWv','Save','player-name','status','</div>\x0a\x20\x20\x20\x20','width','charTimeoutHandle','IMvCk','createElement','getItem','frequency','显示设置','slice','YgqTh','fillText','BTKem','fjNyr','JKqQF','save-result-btn','restore','sfx/wrong.mp3','phraseId','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22tone-name\x22>','colIdx','currentDeckId','lastElapsedSec','siZgU','MYTEw','lastNoInputColumnIdx','Current:','tone','colIndex','keydown','rcTog','uHlmg','push','DFkWM','style','tone-btn','ICicF','hit','进入游戏','YQGbv','warn','fallingBlocks','jtrrO','Game\x20Over!','title','textContent','RdFbk','click','1879325hufMAo','KWYBg','display','phraseQueue','50hsrxGp','ceZtg','XOITV','igLCQ','IlfVv','IbMaH','split','\x20-\x20','key','bhfIl','score','gjtrU','ekmTC','level-label','Your\x20name:','\x20pts,\x20','lastFrameTime','levelLabel','entries','dataset','AbqNA','\x0a以下文件加载失败（忽略）：\x0a','2nd','cnVuA','Leaderboard\x20for\x20this\x20deck','jpuxD','LgiBY','some','DUvmE','lineWidth','len','gain','MfwCE','AdHxP','rPYQJ','value','0|2|3|4|1','over','fSMTD','audioObj','findIndex','currentPhrase','crossOrigin','XQlLN','Level:','jgFhy','rfYAq','lIgHU','textBaseline','categories','aVaIG','本局成绩','wPOto','#333','audioUrl','sfx/miss.mp3','hyzPh','Failed\x20to\x20load\x20','gCzIN','currentPhraseId','displayName','gameClear','orfau','Vonee','OrANv','Qqtdo','12mpeqVv','startTime','\x20\x20|\x20\x20⌨️\x20','AudioContext','TDyOn','datasets','#000','sort','501570PUSzLa','#3a3e49','trim','vRpPZ','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22tone-symbol\x22>','All\x20words\x20used.\x20Game\x20finished.','welcome-panel','text','VAoHL','createGain','from','middle','pdKDe','904025rxIzES','getContext','pop','sfbXp','clearRect','EIeuR','every','currentCategory','xByrQ','fugtt','omkuZ','AlCwc','Player','hZMRa','current','（无）','stop','2319416rObJeO','ceil','background','option','JFgEY','声调方块','Vqvun','sfx/hit.mp3','Zvjvw','rbhQO','rsjUx','level-select','OGQXR','ehJfo','dLiiD','audio','hyfmL','保存成绩','oSvZS','color','auto','answered','addEventListener','modal-summary','oSgyQ','ighYL','3rd','字词用完，游戏结束！','分数：','PRzfu','cloneNode','RlNvX','forEach','none','dxCGi','136983TlowvR','VZELT','save','modal-title','deck-select','records-title','welcome','setItem','fziQl','oFjgy','KcWjm','cHEeW','floor','block','Click\x20below\x20to\x20enter\x20the\x20game,\x20then\x20choose\x20level\x20and\x20deck.','yjeFE','vqLUz','recordsTitle','charIndex','kesKx','&nbsp;','status-label','result-modal','cPDGQ','Load\x20dataset\x20failed:','pOFXG','char','sfx\x20failed','anonymous','fillRect','trueTone','font','score-label','join','Wvphc','board','decksById','hideSetup','timerHandle','replace','GKBZP','close','pause'];a0_0xc7fc=function(){return _0x2a7626;};return a0_0xc7fc();}function nextPhrase(){const _0x39eb0e=a0_0x10deac,_0x4e830f={'upeod':function(_0x51753f){return _0x51753f();},'gCzIN':function(_0x295f6a,_0x2db9d8){return _0x295f6a>_0x2db9d8;},'bAXYM':function(_0x23f410,_0x21ea44,_0x14c942){return _0x23f410(_0x21ea44,_0x14c942);},'XQlLN':function(_0x2b8985,_0x2852ab){return _0x2b8985===_0x2852ab;},'kesKx':function(_0x56ef70,_0x3a1dc2){return _0x56ef70(_0x3a1dc2);},'JnPGe':_0x39eb0e(0x206),'ccqPl':function(_0xe66511,_0x4f9589){return _0xe66511(_0x4f9589);}};_0x4e830f['upeod'](clearCharTimeout);if(gameState[_0x39eb0e(0x1df)])return;if(_0x4e830f[_0x39eb0e(0x28a)](gameState['fallingBlocks']['length'],0x0)){_0x4e830f['bAXYM'](setTimeout,nextPhrase,0x78);return;}if(_0x4e830f[_0x39eb0e(0x27b)](gameState['phraseQueue'][_0x39eb0e(0x202)],0x0)){_0x4e830f[_0x39eb0e(0x2ee)](finishGame,_0x4e830f[_0x39eb0e(0x31e)]);return;}const _0x537b81=gameState[_0x39eb0e(0x24f)][_0x39eb0e(0x1e4)](),_0x3c6cd5=buildCharsForEntry(_0x537b81);if(_0x4e830f[_0x39eb0e(0x27b)](_0x3c6cd5[_0x39eb0e(0x202)],0x0))return _0x4e830f[_0x39eb0e(0x328)](nextPhrase);const _0x13e8da=Date[_0x39eb0e(0x314)]()+'_'+Math[_0x39eb0e(0x1f3)]()['toString'](0x10)[_0x39eb0e(0x225)](0x2);gameState['currentPhrase']={'entry':_0x537b81,'chars':_0x3c6cd5,'answered':new Array(_0x3c6cd5['length'])['fill'](![]),'id':_0x13e8da},gameState[_0x39eb0e(0x28b)]=_0x13e8da,gameState[_0x39eb0e(0x1e9)]=0x0,gameState[_0x39eb0e(0x1f6)]=!![];const _0x165da1=TEXTS[currentLang],_0x263397=_0x3c6cd5[0x0]?.['char']||'';currentTextLabel[_0x39eb0e(0x249)]=_0x165da1[_0x39eb0e(0x2b5)]+'\x20'+_0x537b81[_0x39eb0e(0x2a1)]+_0x39eb0e(0x294)+_0x263397,spawnPhraseBlocks(gameState['currentPhrase']);const _0x5d4b46=_0x4e830f['ccqPl'](playCurrentAudio,_0x537b81);!_0x5d4b46&&scheduleCharTimeout();}function markCharAnswered(_0x42ac9b,_0x26d1dc){const _0x39a221=a0_0x10deac,_0x1ac734={'VAoHL':function(_0x112a0a,_0x31640c){return _0x112a0a>=_0x31640c;},'AbqNA':function(_0x5b9d8a){return _0x5b9d8a();}},_0x4a33cb=gameState[_0x39a221(0x279)];if(!_0x4a33cb)return;if(_0x4a33cb['answered'][_0x42ac9b])return;_0x4a33cb['answered'][_0x42ac9b]=!![];const _0xa1bfc=_0x4a33cb[_0x39a221(0x2cd)]['findIndex'](_0x20f4cf=>!_0x20f4cf),_0x2a334a=TEXTS[currentLang];if(_0x1ac734[_0x39a221(0x2a2)](_0xa1bfc,0x0)){const _0x800d48=_0x4a33cb[_0x39a221(0x32d)][_0xa1bfc]?.[_0x39a221(0x2f5)]||'';currentTextLabel['textContent']=_0x2a334a[_0x39a221(0x2b5)]+'\x20'+_0x4a33cb[_0x39a221(0x1d9)][_0x39a221(0x2a1)]+_0x39a221(0x294)+_0x800d48;}!_0x26d1dc&&(gameState[_0x39a221(0x1db)]=0x0,_0x1ac734[_0x39a221(0x264)](updateScoreUI)),_0x1ac734['AbqNA'](tryFinishPhrase);}function tryFinishPhrase(){const _0x4bba82=a0_0x10deac,_0x6b980b={'QwtYm':function(_0x4e0832,_0x5f5bce){return _0x4e0832&&_0x5f5bce;},'AlCwc':function(_0x28f825,_0x3adc1d,_0x472bf9){return _0x28f825(_0x3adc1d,_0x472bf9);}},_0x262b0e=gameState[_0x4bba82(0x279)];if(!_0x262b0e)return;const _0x55e470=_0x262b0e[_0x4bba82(0x2cd)][_0x4bba82(0x2ad)](Boolean),_0xdd1651=gameState[_0x4bba82(0x245)][_0x4bba82(0x26b)](_0x11b823=>_0x11b823[_0x4bba82(0x22e)]===_0x262b0e['id']);if(_0x6b980b['QwtYm'](_0x55e470,!_0xdd1651))gameState['awaitingInput']=![],gameState[_0x4bba82(0x279)]=null,currentTextLabel[_0x4bba82(0x249)]='',_0x6b980b[_0x4bba82(0x2b2)](setTimeout,()=>{const _0x47870c=_0x4bba82;if(!gameState[_0x47870c(0x1df)])nextPhrase();},0x78);else _0x55e470&&(gameState['awaitingInput']=![]);}function handleToneInput(_0x31298d){const _0x5c782a=a0_0x10deac,_0x20f052={'OunCo':function(_0x37ab67,_0x4ecada){return _0x37ab67===_0x4ecada;},'ADnFJ':function(_0x2d3d9a){return _0x2d3d9a();},'hyfmL':function(_0x2f4c2a){return _0x2f4c2a();},'ehJfo':function(_0x51d923,_0x4f2ed0){return _0x51d923>=_0x4f2ed0;},'orfau':function(_0x283ccc,_0x5d52f3,_0x3ab727){return _0x283ccc(_0x5d52f3,_0x3ab727);},'vqLUz':function(_0x367d80,_0x424281,_0x10ebcd){return _0x367d80(_0x424281,_0x10ebcd);},'Qqtdo':function(_0x58bc9f,_0x465896,_0x593858){return _0x58bc9f(_0x465896,_0x593858);},'BeCWv':function(_0x6d5e9d,_0x36655a,_0x3d689d,_0x2c5bb0,_0x3e0434){return _0x6d5e9d(_0x36655a,_0x3d689d,_0x2c5bb0,_0x3e0434);}};if(gameState['gameOver']||!gameState['awaitingInput'])return;const _0xba6a4b=gameState['currentPhrase'];if(!_0xba6a4b)return;const _0x1cee3f=_0xba6a4b[_0x5c782a(0x2cd)][_0x5c782a(0x278)](_0x450de5=>!_0x450de5);if(_0x20f052[_0x5c782a(0x1ff)](_0x1cee3f,-0x1))return;const _0x286800=_0xba6a4b[_0x5c782a(0x32d)][_0x1cee3f],_0x102626=_0x286800[_0x5c782a(0x237)];_0x20f052['ADnFJ'](clearCharTimeout);if(_0x20f052[_0x5c782a(0x1ff)](_0x31298d,_0x102626)){gameState[_0x5c782a(0x25a)]+=0xa,gameState[_0x5c782a(0x1db)]+=0x1,_0x20f052[_0x5c782a(0x2c8)](updateScoreUI);const _0x5ce6f3=gameState['fallingBlocks']['findIndex'](_0x11cf65=>_0x11cf65[_0x5c782a(0x22e)]===_0xba6a4b['id']&&_0x11cf65[_0x5c782a(0x2ed)]===_0x1cee3f);_0x20f052[_0x5c782a(0x2c5)](_0x5ce6f3,0x0)&&gameState['fallingBlocks'][_0x5c782a(0x1f2)](_0x5ce6f3,0x1),_0x20f052[_0x5c782a(0x28e)](playSfx,_0x5c782a(0x241),0x4b0),_0x20f052[_0x5c782a(0x2eb)](markCharAnswered,_0x1cee3f,!![]);}else updateScoreUI(),_0x20f052[_0x5c782a(0x28e)](playSfx,_0x5c782a(0x205),0x140),_0x20f052[_0x5c782a(0x291)](markCharAnswered,_0x1cee3f,![]),_0x20f052[_0x5c782a(0x219)](settleWrongToneBlock,_0xba6a4b['id'],_0x1cee3f,_0x31298d,_0x286800);}function handleNoInputTimeout(){}function spawnBlockFromError(_0x3bb255,_0x3cedd2){const _0x5a11d8=a0_0x10deac,_0x4390c0={'KcWjm':function(_0x79b4f1,_0x1667bc,_0x3ba6a0){return _0x79b4f1(_0x1667bc,_0x3ba6a0);}},_0x2724e0=TONES[_0x5a11d8(0x1e8)](_0x433fb5=>_0x433fb5[_0x5a11d8(0x237)]===_0x3bb255);if(!_0x2724e0)return;_0x4390c0[_0x5a11d8(0x2e5)](spawnBlockAtColumn,_0x3cedd2,_0x2724e0[_0x5a11d8(0x238)]);}function settleWrongToneBlock(_0x415fa8,_0x5aff88,_0x572770,_0x4fb9ee){const _0xd7e5c6=a0_0x10deac,_0xa66b66={'AWeTh':function(_0x242bf2,_0x4081da){return _0x242bf2>=_0x4081da;},'ekmTC':function(_0x1e5fdf,_0xbf877a){return _0x1e5fdf+_0xbf877a;},'YQGbv':function(_0x127813,_0x5bff8e){return _0x127813*_0x5bff8e;},'GKBZP':function(_0x1663c8,_0x26aa38){return _0x1663c8-_0x26aa38;},'fugtt':function(_0xfde5a3,_0x2fbd1e){return _0xfde5a3(_0x2fbd1e);}},_0x373f3c=TONES['find'](_0x7f2a7e=>_0x7f2a7e['tone']===_0x572770);if(!_0x373f3c)return;const _0x212778=gameState[_0xd7e5c6(0x245)][_0xd7e5c6(0x278)](_0x31fc65=>_0x31fc65[_0xd7e5c6(0x22e)]===_0x415fa8&&_0x31fc65['charIndex']===_0x5aff88);if(_0xa66b66[_0xd7e5c6(0x215)](_0x212778,0x0))gameState[_0xd7e5c6(0x245)]['splice'](_0x212778,0x1);const _0x4f1e4a=gameState[_0xd7e5c6(0x2fe)][_0x373f3c[_0xd7e5c6(0x238)]][_0xd7e5c6(0x202)],_0x3d0e2=gameState[_0xd7e5c6(0x245)]['filter'](_0x101deb=>_0x101deb[_0xd7e5c6(0x230)]===_0x373f3c['colIndex'])[_0xd7e5c6(0x202)],_0x5837c4=_0xa66b66[_0xd7e5c6(0x25c)](_0x4f1e4a,_0x3d0e2),_0x235503={'char':_0x4fb9ee['char'],'trueTone':_0x4fb9ee['tone'],'colIdx':_0x373f3c[_0xd7e5c6(0x238)],'targetRowIndex':_0x5837c4,'y':_0xa66b66[_0xd7e5c6(0x243)](_0xa66b66[_0xd7e5c6(0x303)](MAX_ROWS,0x1)-_0x5837c4,canvas[_0xd7e5c6(0x201)]/MAX_ROWS),'phraseId':_0x415fa8,'charIndex':_0x5aff88};_0xa66b66[_0xd7e5c6(0x2b0)](finalizeLanding,_0x235503);}function spawnBlockAtColumn(_0x4171f2,_0x3132be){const _0x21da86=a0_0x10deac,_0x517110={'nJjbY':function(_0x5f54ff,_0x9a0905){return _0x5f54ff+_0x9a0905;},'ZcCYO':function(_0x6331ab,_0x1badca){return _0x6331ab>=_0x1badca;}},_0x5c8dd1=gameState[_0x21da86(0x2fe)][_0x3132be][_0x21da86(0x202)],_0x34baf6=gameState[_0x21da86(0x245)]['filter'](_0x35b274=>_0x35b274[_0x21da86(0x230)]===_0x3132be)[_0x21da86(0x202)],_0x4794d3=_0x517110[_0x21da86(0x31a)](_0x5c8dd1,_0x34baf6);if(_0x517110['ZcCYO'](_0x4794d3,MAX_ROWS)){gameState[_0x21da86(0x245)][_0x21da86(0x23c)]({'char':_0x4171f2['char'],'trueTone':_0x4171f2['tone'],'colIdx':_0x3132be,'targetRowIndex':_0x4794d3,'y':-0x32});return;}gameState[_0x21da86(0x245)][_0x21da86(0x23c)]({'char':_0x4171f2[_0x21da86(0x2f5)],'trueTone':_0x4171f2[_0x21da86(0x237)],'colIdx':_0x3132be,'targetRowIndex':_0x4794d3,'y':-0x32});}function finalizeLanding(_0x4f876f){const _0x1fa384=a0_0x10deac,_0x2430e9={'RdFbk':function(_0x144243,_0x254363){return _0x144243&&_0x254363;},'lIgHU':function(_0x3294fa,_0x5e396d,_0xb847b4){return _0x3294fa(_0x5e396d,_0xb847b4);},'qkPok':function(_0x17b2e4,_0x3f251a,_0x18278d){return _0x17b2e4(_0x3f251a,_0x18278d);},'BgzFM':function(_0x52e383,_0x280fe8){return _0x52e383(_0x280fe8);},'YgUoa':function(_0xfafe15){return _0xfafe15();},'yhmYw':function(_0x56bb1a,_0x189a16){return _0x56bb1a(_0x189a16);},'DAVyb':_0x1fa384(0x275)},_0x56283c=_0x4f876f[_0x1fa384(0x230)],_0x1d48f5=gameState[_0x1fa384(0x2fe)][_0x56283c],_0x56021d=gameState['currentPhrase']&&_0x4f876f[_0x1fa384(0x22e)]===gameState[_0x1fa384(0x279)]['id'],_0x36544b=_0x56021d&&gameState[_0x1fa384(0x279)][_0x1fa384(0x2cd)][_0x4f876f['charIndex']];if(_0x2430e9[_0x1fa384(0x24a)](_0x56021d,!_0x36544b)){const _0x224f22=_0x1fa384(0x274)[_0x1fa384(0x256)]('|');let _0x11d3d8=0x0;while(!![]){switch(_0x224f22[_0x11d3d8++]){case'0':_0x2430e9[_0x1fa384(0x27f)](playSfx,'miss',0x1b8);continue;case'1':return;case'2':_0x2430e9[_0x1fa384(0x204)](markCharAnswered,_0x4f876f[_0x1fa384(0x2ed)],![]);continue;case'3':_0x2430e9[_0x1fa384(0x209)](applyPenaltyRows,0x1);continue;case'4':_0x2430e9[_0x1fa384(0x31c)](tryFinishPhrase);continue;}break;}}_0x1d48f5[_0x1fa384(0x23c)]({'char':_0x4f876f[_0x1fa384(0x2f5)],'trueTone':_0x4f876f[_0x1fa384(0x2f9)]});if(_0x1d48f5[_0x1fa384(0x202)]>MAX_ROWS){_0x2430e9['yhmYw'](finishGame,_0x2430e9[_0x1fa384(0x1f4)]);return;}checkColumnForClear(_0x56283c),tryFinishPhrase();}function applyPenaltyRows(_0x24ddd9){const _0x212d8e=a0_0x10deac,_0xdd649f={'uqqIo':function(_0x30b554,_0x4ece56){return _0x30b554<_0x4ece56;},'uHlmg':function(_0x27acc1,_0x1dc160){return _0x27acc1-_0x1dc160;}};for(let _0x5c2aa8=0x0;_0xdd649f[_0x212d8e(0x1d6)](_0x5c2aa8,0x5);_0x5c2aa8++){const _0x1484ae=gameState['board'][_0x5c2aa8],_0x234ce3=Math['max'](0x0,_0xdd649f[_0x212d8e(0x23b)](MAX_ROWS,_0x1484ae['length'])),_0x2153c6=Math[_0x212d8e(0x208)](_0x24ddd9,_0x234ce3);for(let _0x2bbcac=0x0;_0xdd649f[_0x212d8e(0x1d6)](_0x2bbcac,_0x2153c6);_0x2bbcac++){_0x1484ae[_0x212d8e(0x23c)]({'char':'','trueTone':0x0});}}}function checkColumnForClear(_0x5706c3){const _0x2798f0=a0_0x10deac,_0x125ec6={'qwpBU':function(_0x38578f,_0x2e52cf){return _0x38578f<_0x2e52cf;},'bhfIl':function(_0xed1ed1,_0x57fad9){return _0xed1ed1===_0x57fad9;},'OrANv':function(_0x4a1892,_0x2567d0){return _0x4a1892!==_0x2567d0;},'xByrQ':function(_0x3da04c,_0x2d1a51){return _0x3da04c>=_0x2d1a51;},'BQMIU':function(_0x43e199,_0x6fcd46){return _0x43e199>=_0x6fcd46;},'pdKDe':function(_0x1cf60b){return _0x1cf60b();},'omkuZ':function(_0x23ad09,_0x4d1896){return _0x23ad09<_0x4d1896;},'LWotc':function(_0x1e8aba,_0x4d13c2){return _0x1e8aba+_0x4d13c2;}},_0x53b79b=gameState[_0x2798f0(0x2fe)][_0x5706c3];if(_0x125ec6['qwpBU'](_0x53b79b[_0x2798f0(0x202)],0x5))return;let _0x4e24d2=null,_0x315db6=0x0,_0x54915a=0x0;const _0x274918=[];for(let _0xd4aac5=0x0;_0x125ec6['qwpBU'](_0xd4aac5,_0x53b79b[_0x2798f0(0x202)]);_0xd4aac5++){const _0x3317c7=_0x53b79b[_0xd4aac5];if(_0x125ec6['bhfIl'](_0x4e24d2,null)||_0x125ec6[_0x2798f0(0x290)](_0x3317c7[_0x2798f0(0x2f9)],_0x4e24d2)){if(_0x125ec6[_0x2798f0(0x2af)](_0x54915a,0x5))_0x274918['push']({'start':_0x315db6,'len':_0x54915a,'tone':_0x4e24d2});_0x4e24d2=_0x3317c7['trueTone'],_0x315db6=_0xd4aac5,_0x54915a=0x1;}else _0x54915a++;}if(_0x125ec6[_0x2798f0(0x311)](_0x54915a,0x5))_0x274918[_0x2798f0(0x23c)]({'start':_0x315db6,'len':_0x54915a,'tone':_0x4e24d2});if(_0x125ec6[_0x2798f0(0x259)](_0x274918[_0x2798f0(0x202)],0x0))return;const _0x20699c=_0x274918[0x0],_0x53500f=_0x20699c['len']*0xa;gameState['score']+=_0x53500f,gameState[_0x2798f0(0x1db)]+=0x1,_0x125ec6[_0x2798f0(0x2a6)](updateScoreUI);const _0x391cee=[];for(let _0x1d2c2d=0x0;_0x125ec6[_0x2798f0(0x2b1)](_0x1d2c2d,_0x53b79b['length']);_0x1d2c2d++){if(_0x125ec6[_0x2798f0(0x329)](_0x1d2c2d,_0x20699c[_0x2798f0(0x308)])||_0x125ec6['xByrQ'](_0x1d2c2d,_0x125ec6['LWotc'](_0x20699c[_0x2798f0(0x308)],_0x20699c[_0x2798f0(0x26e)])))_0x391cee['push'](_0x53b79b[_0x1d2c2d]);}gameState['board'][_0x5706c3]=_0x391cee;}function finishGame(_0x5890ae){const _0x1ebf56=a0_0x10deac,_0x1ee692={'eRNwO':function(_0x582595){return _0x582595();},'YgqTh':function(_0x2ee6d6,_0x1a0a9c){return _0x2ee6d6===_0x1a0a9c;},'cnVuA':_0x1ebf56(0x2e8)};if(gameState[_0x1ebf56(0x1df)])return;gameState[_0x1ebf56(0x1df)]=!![],gameState[_0x1ebf56(0x1f6)]=![],_0x1ee692['eRNwO'](clearCharTimeout),stopTimer();const _0x4faa63=TEXTS[currentLang];statusLabel['textContent']=_0x1ee692[_0x1ebf56(0x226)](_0x5890ae,_0x1ebf56(0x275))?_0x4faa63[_0x1ebf56(0x1df)]:_0x4faa63[_0x1ebf56(0x28d)];const _0x53d042=gameState[_0x1ebf56(0x232)][_0x1ebf56(0x1d0)](0x1),_0x5b2518=(gameState['currentDeckId']||'')['toUpperCase']();modalSummaryEl['textContent']=_0x5b2518+'\x0a'+_0x4faa63['score']+'\x20'+gameState[_0x1ebf56(0x25a)]+'\x0a'+_0x4faa63[_0x1ebf56(0x30f)]+'\x20'+_0x53d042+'s',playerNameInput[_0x1ebf56(0x273)]='',resultModal[_0x1ebf56(0x23e)][_0x1ebf56(0x24e)]=_0x1ee692[_0x1ebf56(0x267)];}function drawBoard(){const _0x21bd3b=a0_0x10deac,_0xec0d4c={'IbMaH':function(_0x1fcb75,_0x57cc4f){return _0x1fcb75*_0x57cc4f;},'BZqQs':function(_0x437647,_0x16cf03){return _0x437647/_0x16cf03;},'ajsBs':function(_0x14f640,_0xc6c1a0){return _0x14f640/_0xc6c1a0;},'cHEeW':function(_0x5e64b5,_0x3a3348){return _0x5e64b5/_0x3a3348;},'ighYL':function(_0x1bfdc4,_0x50e51c){return _0x1bfdc4<_0x50e51c;},'Vonee':function(_0xf43d8a,_0x4efcdb){return _0xf43d8a<_0x4efcdb;},'rPYQJ':function(_0x4c09fc,_0x2aae40){return _0x4c09fc*_0x2aae40;},'jpuxD':function(_0xcaf7b9,_0x1e8fb3){return _0xcaf7b9-_0x1e8fb3;},'vRpPZ':'2|0|4|3|1','siZgU':function(_0x1127eb,_0x533d1f){return _0x1127eb+_0x533d1f;},'KWYBg':function(_0x2f39dd,_0x2ce5b2){return _0x2f39dd+_0x2ce5b2;},'rfYAq':'#000','eOHHY':_0x21bd3b(0x2a5),'CfiXS':'center'},_0x140839=canvas[_0x21bd3b(0x21e)],_0x25baab=canvas[_0x21bd3b(0x201)];ctx[_0x21bd3b(0x2ab)](0x0,0x0,_0x140839,_0x25baab);const _0x23cd23=_0xec0d4c[_0x21bd3b(0x20a)](_0x140839,0x5),_0x41f62a=_0xec0d4c[_0x21bd3b(0x2e6)](_0x25baab,MAX_ROWS);ctx[_0x21bd3b(0x2dd)](),ctx[_0x21bd3b(0x217)]=_0x21bd3b(0x285),ctx[_0x21bd3b(0x26d)]=0x1;for(let _0x4140b3=0x0;_0xec0d4c[_0x21bd3b(0x2d1)](_0x4140b3,0x5);_0x4140b3++){const _0x49ce03=_0xec0d4c[_0x21bd3b(0x255)](_0x4140b3,_0x23cd23);ctx['strokeRect'](_0x49ce03,0x0,_0x23cd23,_0x25baab);}ctx[_0x21bd3b(0x22c)]();for(let _0x8c5059=0x0;_0xec0d4c['ighYL'](_0x8c5059,0x5);_0x8c5059++){const _0xcaf167=gameState[_0x21bd3b(0x2fe)][_0x8c5059];for(let _0x41a22f=0x0;_0xec0d4c[_0x21bd3b(0x28f)](_0x41a22f,_0xcaf167['length']);_0x41a22f++){const _0x533b41=_0xcaf167[_0x41a22f],_0x3bdc02=TONES['find'](_0x23e18d=>_0x23e18d[_0x21bd3b(0x237)]===_0x533b41['trueTone']),_0x454253=_0x3bdc02?_0x3bdc02[_0x21bd3b(0x2cb)]:_0x21bd3b(0x29b),_0x1d91cf=_0xec0d4c['IbMaH'](_0x8c5059,_0x23cd23),_0x45de8b=_0xec0d4c[_0x21bd3b(0x272)](_0xec0d4c[_0x21bd3b(0x269)](MAX_ROWS,0x1)-_0x41a22f,_0x41f62a),_0x1911e2=_0x23cd23,_0x557d48=_0x41f62a;ctx['fillStyle']=_0x454253,ctx[_0x21bd3b(0x2f8)](_0x1d91cf,_0x45de8b,_0x1911e2,_0x557d48),ctx['strokeStyle']=_0x21bd3b(0x298),ctx[_0x21bd3b(0x26d)]=0x1,ctx['strokeRect'](_0x1d91cf,_0x45de8b,_0x1911e2,_0x557d48);if(_0x533b41[_0x21bd3b(0x2f5)]){const _0x6bc69e=_0xec0d4c[_0x21bd3b(0x29d)][_0x21bd3b(0x256)]('|');let _0x5453e6=0x0;while(!![]){switch(_0x6bc69e[_0x5453e6++]){case'0':ctx[_0x21bd3b(0x2fa)]=Math[_0x21bd3b(0x2e7)](_0xec0d4c['rPYQJ'](_0x557d48,0.5))+_0x21bd3b(0x1de);continue;case'1':ctx[_0x21bd3b(0x227)](_0x533b41[_0x21bd3b(0x2f5)],_0xec0d4c[_0x21bd3b(0x233)](_0x1d91cf,_0xec0d4c[_0x21bd3b(0x20a)](_0x1911e2,0x2)),_0xec0d4c[_0x21bd3b(0x24d)](_0x45de8b,_0x557d48/0x2));continue;case'2':ctx['fillStyle']=_0xec0d4c[_0x21bd3b(0x27e)];continue;case'3':ctx[_0x21bd3b(0x280)]=_0xec0d4c['eOHHY'];continue;case'4':ctx[_0x21bd3b(0x20c)]=_0xec0d4c[_0x21bd3b(0x310)];continue;}break;}}}}gameState[_0x21bd3b(0x245)][_0x21bd3b(0x2d8)](_0x9f3f02=>{const _0x647b35=_0x21bd3b,_0x4174a6=_0x9f3f02[_0x647b35(0x230)]*_0x23cd23,_0x495019=_0x23cd23,_0xca4bc4=_0x41f62a;ctx[_0x647b35(0x306)]=FALLING_COLOR,ctx[_0x647b35(0x2f8)](_0x4174a6,_0x9f3f02['y'],_0x495019,_0xca4bc4),ctx[_0x647b35(0x217)]=_0x647b35(0x298),ctx['lineWidth']=0x1,ctx[_0x647b35(0x312)](_0x4174a6,_0x9f3f02['y'],_0x495019,_0xca4bc4),ctx[_0x647b35(0x306)]=FALLING_TEXT_COLOR,ctx[_0x647b35(0x2fa)]=Math[_0x647b35(0x2e7)](_0xec0d4c[_0x647b35(0x255)](_0xca4bc4,0.5))+_0x647b35(0x1de),ctx[_0x647b35(0x20c)]='center',ctx['textBaseline']=_0x647b35(0x2a5),ctx[_0x647b35(0x227)](_0x9f3f02[_0x647b35(0x2f5)],_0x4174a6+_0xec0d4c[_0x647b35(0x20a)](_0x495019,0x2),_0x9f3f02['y']+_0xec0d4c['ajsBs'](_0xca4bc4,0x2));});}function animate(_0x2b6cde){const _0x4b5454=a0_0x10deac,_0x441eb4={'KGTxl':function(_0x50798a,_0xb3b22b){return _0x50798a*_0xb3b22b;},'aVaIG':function(_0x933f1d,_0x5cd1b7){return _0x933f1d-_0x5cd1b7;},'jtrrO':function(_0x45baad,_0xae4f70){return _0x45baad-_0xae4f70;},'VZELT':function(_0x315dc3,_0x4e707a){return _0x315dc3(_0x4e707a);},'ONsxC':function(_0x5abd32,_0x317ebb){return _0x5abd32/_0x317ebb;},'fziQl':function(_0x2fe494){return _0x2fe494();}};gameState['lastFrameTime']==null&&(gameState['lastFrameTime']=_0x2b6cde);const _0x119a04=_0x441eb4[_0x4b5454(0x30b)](_0x441eb4['jtrrO'](_0x2b6cde,gameState[_0x4b5454(0x260)]),0x3e8);gameState[_0x4b5454(0x260)]=_0x2b6cde;const _0x37e7b4=_0x441eb4[_0x4b5454(0x30b)](canvas[_0x4b5454(0x201)],MAX_ROWS),_0x2938eb=[];gameState[_0x4b5454(0x245)]['forEach'](_0x245f95=>{const _0x132b66=_0x4b5454,_0x4037bc=_0x441eb4[_0x132b66(0x1eb)](_0x441eb4[_0x132b66(0x282)](_0x441eb4[_0x132b66(0x246)](MAX_ROWS,0x1),_0x245f95[_0x132b66(0x200)]),_0x37e7b4);_0x245f95['y']+=_0x441eb4[_0x132b66(0x1eb)](FALL_SPEED,_0x119a04),_0x245f95['y']>=_0x4037bc?(_0x245f95['y']=_0x4037bc,_0x441eb4[_0x132b66(0x2dc)](finalizeLanding,_0x245f95)):_0x2938eb[_0x132b66(0x23c)](_0x245f95);}),gameState['fallingBlocks']=_0x2938eb,_0x441eb4[_0x4b5454(0x2e3)](drawBoard),requestAnimationFrame(animate);}function loadRecords(){const _0x42528a=a0_0x10deac;try{const _0x450736=localStorage[_0x42528a(0x222)](STORAGE_KEY);if(!_0x450736)return{};return JSON['parse'](_0x450736);}catch{return{};}}function saveRecords(_0x200bce){const _0x4325c9=a0_0x10deac;try{localStorage[_0x4325c9(0x2e2)](STORAGE_KEY,JSON['stringify'](_0x200bce));}catch{}}function addRecord(_0x26a074,_0x36c47c,_0x1a9229,_0x2df76c){const _0x1b53a2=a0_0x10deac,_0x481dc2={'Egxwt':function(_0x45a14f,_0xa60dbe){return _0x45a14f-_0xa60dbe;},'eKFVg':function(_0x42232f){return _0x42232f();},'pQGQK':function(_0x4e0f78,_0x2dfff3){return _0x4e0f78(_0x2dfff3);}},_0x4a83b6=_0x481dc2[_0x1b53a2(0x30d)](loadRecords);if(!_0x4a83b6[_0x26a074])_0x4a83b6[_0x26a074]=[];_0x4a83b6[_0x26a074][_0x1b53a2(0x23c)]({'name':_0x36c47c,'score':_0x1a9229,'time':_0x2df76c,'date':new Date()['toISOString']()}),_0x4a83b6[_0x26a074][_0x1b53a2(0x299)]((_0x312fa7,_0x3b5e11)=>{const _0x2b9bbf=_0x1b53a2;if(_0x3b5e11[_0x2b9bbf(0x25a)]!==_0x312fa7[_0x2b9bbf(0x25a)])return _0x481dc2[_0x2b9bbf(0x326)](_0x3b5e11[_0x2b9bbf(0x25a)],_0x312fa7['score']);return _0x312fa7[_0x2b9bbf(0x30f)]-_0x3b5e11[_0x2b9bbf(0x30f)];}),_0x4a83b6[_0x26a074]=_0x4a83b6[_0x26a074][_0x1b53a2(0x225)](0x0,0xa),_0x481dc2['pQGQK'](saveRecords,_0x4a83b6);}function renderRecords(){const _0x1bcf05=a0_0x10deac,_0x2ed89d={'XwYig':function(_0x37115e,_0x4098f8){return _0x37115e+_0x4098f8;},'LCnQd':_0x1bcf05(0x2b3)},_0x311880=loadRecords(),_0x4660be=gameState[_0x1bcf05(0x231)],_0x524832=_0x4660be&&_0x311880[_0x4660be]?_0x311880[_0x4660be]:[];recordsListEl[_0x1bcf05(0x1e6)]='',_0x524832[_0x1bcf05(0x2d8)]((_0x3148b1,_0x4da5ce)=>{const _0x4d42fa=_0x1bcf05,_0x211f25=document[_0x4d42fa(0x221)]('li');_0x211f25[_0x4d42fa(0x249)]=_0x2ed89d[_0x4d42fa(0x1e0)](_0x4da5ce,0x1)+'.\x20'+(_0x3148b1[_0x4d42fa(0x20b)]||_0x2ed89d['LCnQd'])+_0x4d42fa(0x257)+_0x3148b1[_0x4d42fa(0x25a)]+_0x4d42fa(0x25f)+_0x3148b1[_0x4d42fa(0x30f)]['toFixed'](0x1)+'s',recordsListEl[_0x4d42fa(0x1d3)](_0x211f25);});}saveResultBtn[a0_0x10deac(0x2ce)](a0_0x10deac(0x24b),()=>{const _0x476525=a0_0x10deac,_0x1b6012={'xSOny':_0x476525(0x2b3),'AdHxP':function(_0x2e3e0b,_0x2163a2,_0x280840,_0x18cd89,_0x36ba2e){return _0x2e3e0b(_0x2163a2,_0x280840,_0x18cd89,_0x36ba2e);},'qSXpY':_0x476525(0x2d9),'dxCGi':function(_0x399794){return _0x399794();}},_0x538463=playerNameInput[_0x476525(0x273)][_0x476525(0x29c)]()||_0x1b6012[_0x476525(0x1e2)],_0x58fcbb=gameState[_0x476525(0x231)];_0x1b6012[_0x476525(0x271)](addRecord,_0x58fcbb,_0x538463,gameState[_0x476525(0x25a)],gameState[_0x476525(0x232)]||0x0),resultModal[_0x476525(0x23e)]['display']=_0x1b6012[_0x476525(0x211)],_0x1b6012[_0x476525(0x2da)](renderRecords);}),closeResultBtn[a0_0x10deac(0x2ce)](a0_0x10deac(0x24b),()=>{const _0x120804=a0_0x10deac,_0x287a48={'GAYDd':'none'};resultModal['style']['display']=_0x287a48[_0x120804(0x327)];}),startBtn[a0_0x10deac(0x2ce)](a0_0x10deac(0x24b),()=>{const _0x46d26e=a0_0x10deac,_0x3b570c={'doUCc':function(_0x2c9a60,_0x30ff7c){return _0x2c9a60||_0x30ff7c;},'rsjUx':function(_0x49e292){return _0x49e292();},'PRzfu':_0x46d26e(0x2d9),'AIZGx':function(_0x2fadca){return _0x2fadca();},'sfbXp':function(_0x2dbc8f){return _0x2dbc8f();}},_0x519f3f=levelSelect['value'],_0x37b617=deckSelect[_0x46d26e(0x273)];if(_0x3b570c[_0x46d26e(0x214)](!_0x519f3f,!_0x37b617))return;gameState[_0x46d26e(0x2ae)]=_0x519f3f,gameState['currentDeckId']=_0x37b617,_0x3b570c[_0x46d26e(0x2c2)](resetGameStateForCurrentDeck),welcomePanel[_0x46d26e(0x23e)][_0x46d26e(0x24e)]=_0x3b570c[_0x46d26e(0x2d5)],_0x3b570c[_0x46d26e(0x319)](startTimer),renderRecords(),_0x3b570c[_0x46d26e(0x2c2)](updateSetupToggleLabel),_0x3b570c[_0x46d26e(0x2aa)](nextPhrase);}),levelSelect[a0_0x10deac(0x2ce)](a0_0x10deac(0x216),_0x9bb6a9=>{const _0xeb29bf=a0_0x10deac,_0x327bf0=_0x9bb6a9[_0xeb29bf(0x1d1)][_0xeb29bf(0x273)];gameState[_0xeb29bf(0x2ae)]=_0x327bf0,populateDeckSelectForCategory(_0x327bf0),renderRecords();}),deckSelect[a0_0x10deac(0x2ce)](a0_0x10deac(0x216),_0x43b077=>{const _0x1f40f4=a0_0x10deac,_0x69b5b3={'Wvphc':function(_0x2148b2){return _0x2148b2();}};gameState['currentDeckId']=_0x43b077[_0x1f40f4(0x1d1)][_0x1f40f4(0x273)],_0x69b5b3[_0x1f40f4(0x2fd)](renderRecords);}),window[a0_0x10deac(0x2ce)](a0_0x10deac(0x239),_0x1f2627=>{const _0x1d8868=a0_0x10deac,_0x5d3463={'VrhPf':function(_0x2dd4cb,_0x179b3e,_0x3bd49a){return _0x2dd4cb(_0x179b3e,_0x3bd49a);},'uCdWR':function(_0xc47a09,_0x52cb1a){return _0xc47a09>=_0x52cb1a;},'qUdOA':function(_0x1f11f3,_0x59041a){return _0x1f11f3<=_0x59041a;},'FWbHz':function(_0x5f3aa2,_0x39dcdc){return _0x5f3aa2(_0x39dcdc);}},_0x26cf7a=_0x5d3463['VrhPf'](parseInt,_0x1f2627[_0x1d8868(0x258)],0xa);if(_0x5d3463[_0x1d8868(0x1ee)](_0x26cf7a,0x1)&&_0x5d3463['qUdOA'](_0x26cf7a,0x5))_0x5d3463['FWbHz'](handleToneInput,_0x26cf7a);}),async function init(){const _0x531a4b=a0_0x10deac,_0x2a1bce={'oSgyQ':function(_0x25ace3){return _0x25ace3();},'IlfVv':function(_0x4cbe4f){return _0x4cbe4f();},'EIeuR':function(_0x19bd44){return _0x19bd44();},'Vqvun':function(_0xafb6ba,_0x234596){return _0xafb6ba(_0x234596);},'BTKem':function(_0x4ac649,_0x64c56c){return _0x4ac649+_0x64c56c;},'fSMTD':'加载数据失败：'};try{await _0x2a1bce[_0x531a4b(0x2d0)](loadAllDatasets),_0x2a1bce['oSgyQ'](preloadSfx),_0x2a1bce[_0x531a4b(0x254)](updateLanguageUI),_0x2a1bce[_0x531a4b(0x2ac)](drawBoard),_0x2a1bce[_0x531a4b(0x2be)](requestAnimationFrame,animate);}catch(_0x3a460e){console[_0x531a4b(0x1f5)](_0x3a460e),infoDiv[_0x531a4b(0x249)]=_0x2a1bce[_0x531a4b(0x228)](_0x2a1bce[_0x531a4b(0x276)],_0x3a460e['message']);}}();